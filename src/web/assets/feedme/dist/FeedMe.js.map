{"version":3,"file":"FeedMe.js","mappings":"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","sources":["webpack:///./js/feed-me.js","webpack:///./lib/selectize.js","webpack:///./scss/feed-me.scss?6475","webpack:///../../../../../node_modules/vue-style-loader/lib/listToStyles.js","webpack:///../../../../../node_modules/vue-style-loader/lib/addStylesClient.js","webpack:///external var \"jQuery\"","webpack:///webpack/bootstrap","webpack:///webpack/runtime/compat get default export","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/hasOwnProperty shorthand"],"sourcesContent":["/* globals Craft, $ */\n\n// ==========================================================================\n\n// Feed Me Plugin for Craft CMS\n\n// ==========================================================================\n\n$(function () {\n  if (typeof Craft.FeedMe === typeof undefined) {\n    Craft.FeedMe = {};\n  }\n\n  // Settings pane toggle for feeds index\n  $(document).on('click', '#feeds .settings', function (e) {\n    e.preventDefault();\n\n    var row = $(this).parents('tr').data('id') + '-settings';\n    var $settingsRow = $('tr[data-settings-id=\"' + row + '\"] .settings-pane');\n\n    $settingsRow.toggle();\n  });\n\n  // Change the import strategy for Users\n  var $disableLabel = $(\n    'input[name=\"duplicateHandle[]\"][value=\"disable\"]'\n  ).next('label');\n  var originalDisableLabel = $disableLabel.text();\n  var $disableInstructions = $disableLabel.siblings('.instructions');\n  var originalDisableInstructions = $disableInstructions.text();\n\n  // Toggle various field when changing element type\n  $(document).on('change', '#elementType', function () {\n    $('.element-select').hide();\n\n    var value = $(this).val().replace(/\\\\/g, '-');\n    $('.element-select[data-type=\"' + value + '\"]').show();\n\n    if (value === 'craft-elements-User') {\n      $disableLabel.text(Craft.t('feed-me', 'Suspend missing users'));\n      $disableInstructions.text(\n        Craft.t('feed-me', 'Suspends any users that are missing from the feed.')\n      );\n    } else {\n      $disableLabel.text(originalDisableLabel);\n      $disableInstructions.text(originalDisableInstructions);\n    }\n  });\n\n  $('#elementType').trigger('change');\n\n  // Toggle the Entry Type field when changing the section select\n  $(document).on('change', '.element-parent-group select', function () {\n    var sections = $(this).parents('.element-sub-group').data('items') || {};\n    var groupId = $(this).val();\n    var entryType = 'item_' + groupId;\n    var entryTypes = sections[entryType] || [];\n\n    var currentValue = $('.element-child-group select').val();\n\n    var newOptions =\n      '<option value=\"\">' + Craft.t('feed-me', 'None') + '</option>';\n    $.each(entryTypes, function (index, value) {\n      if (index) {\n        newOptions += '<option value=\"' + index + '\">' + value + '</option>';\n      }\n    });\n\n    $('.element-child-group select').html(newOptions);\n\n    // Select the first non-empty, or pre-selected\n    if (currentValue) {\n      $('.element-child-group select').val(currentValue);\n    } else {\n      $($('.element-child-group select').children()[1]).attr('selected', true);\n    }\n\n    // Show/hide the import settings depending on whether this group is a singleton\n    var elementType = $('#elementType').val();\n    if (\n      Craft.FeedMe.elementTypes[elementType] &&\n      Craft.FeedMe.elementTypes[elementType].groups[groupId] &&\n      Craft.FeedMe.elementTypes[elementType].groups[groupId].isSingleton\n    ) {\n      if (!$('#singleton').val()) {\n        $('#singleton').val('1');\n        $('#is-create').attr({checked: false, disabled: true});\n        $('#is-update').attr({checked: true, disabled: true});\n        $('#is-disable-globally').attr({checked: false, disabled: true});\n        $('#is-disable-site').attr({checked: false, disabled: true});\n        $('#is-delete').attr({checked: false, disabled: true});\n      }\n    } else if ($('#singleton').val()) {\n      $('#singleton').val('');\n      $('#is-create').attr({checked: true, disabled: false});\n      $('#is-update').attr({checked: false, disabled: false});\n      $('#is-disable-globally').attr({checked: false, disabled: false});\n      $('#is-disable-site').attr({checked: false, disabled: false});\n      $('#is-delete').attr({checked: false, disabled: false});\n    }\n  });\n\n  $('.element-parent-group select:visible').trigger('change');\n\n  //\n  // Field Mapping\n  //\n\n  // For field-mapping, auto-select Title if no unique checkboxes are set\n  if ($('.feedme-uniques').length) {\n    var checked = $('.feedme-uniques input[type=\"checkbox\"]:checked').length;\n\n    if (!checked) {\n      $('.feedme-uniques input[type=\"checkbox\"]:first').prop('checked', true);\n    }\n  }\n\n  // For Assets, only show the upload options if we decide to upload\n  $('.assets-uploads input').on('change', function (e) {\n    var $options = $(this).parents('.field-extra-settings').find('.select');\n    var $label = $(this)\n      .parents('.field-extra-settings')\n      .find('.asset-label-hide');\n    var $filenameNode = $(this)\n      .parents('.field-extra-settings')\n      .find('.asset-filename-node');\n\n    if ($(this).prop('checked')) {\n      $label.css({opacity: 1, visibility: 'visible'});\n      $options.css({opacity: 1, visibility: 'visible'});\n      $filenameNode.show();\n    } else {\n      $label.css({opacity: 0, visibility: 'hidden'});\n      $options.css({opacity: 0, visibility: 'hidden'});\n      $filenameNode.hide();\n    }\n  });\n\n  // On-load, hide/show upload options\n  $('.assets-uploads input').trigger('change');\n\n  // For elements, show the grouping select(s)\n  $('.field-extra-settings .element-create input').on('change', function (e) {\n    var $container = $(this)\n      .parents('.field-extra-settings')\n      .find('.element-groups');\n\n    if ($(this).prop('checked')) {\n      $container.show();\n    } else {\n      $container.hide();\n    }\n  });\n\n  $('.field-extra-settings .element-create input').trigger('change');\n\n  // Toggle various field when changing element type\n  $('.field-extra-settings .element-group-section select').on(\n    'change',\n    function (e) {\n      var $container = $(this)\n        .parents('.field-extra-settings')\n        .find('.element-group-entrytype');\n      var sections = $container.data('items');\n\n      // var sections = $(this).parents('.element-sub-group').data('items');\n      var entryType = 'item_' + $(this).val();\n      var entryTypes = sections[entryType];\n\n      var newOptions = '';\n      $.each(entryTypes, function (index, value) {\n        if (index) {\n          newOptions += '<option value=\"' + index + '\">' + value + '</option>';\n        }\n      });\n\n      $container.find('select').html(newOptions);\n    }\n  );\n\n  $('.field-extra-settings .element-group-section select').trigger('change');\n\n  // Selectize inputs\n  $('.feedme-mapping .selectize select').selectize({\n    allowEmptyOption: true,\n  });\n\n  // Help with sub-element field toggle\n  $('.subelement-toggle label').on('click', function (e) {\n    var $lightswitch = $(this)\n      .parents('.subelement-toggle')\n      .find('.lightswitch')\n      .data('lightswitch');\n\n    $lightswitch.toggle();\n  });\n\n  // Show initially hidden element sub-fields. A little tricky because they're in a table, and all equal siblings\n  $('.subelement-toggle .lightswitch').on('change', function (e) {\n    var $lightswitch = $(this).data('lightswitch');\n    var $tr = $(this).parents('tr');\n    var $directSiblings = $tr.nextUntil(':not(.element-sub-field)');\n\n    $directSiblings.toggle();\n  });\n\n  // If we have any element sub-fields that are being mapped, we want to show the panel to notify users they're mapping stuff\n  $('.element-sub-field').each(function (index, element) {\n    var mappingValue = $(this).find('.col-map select').val();\n    var defaultValue = $(this).find('.col-default input').val();\n\n    var rowValues = [mappingValue, defaultValue];\n    var rowHasValue = false;\n\n    // Check for inputs and selects which have a value\n    $.each(rowValues, function (i, v) {\n      if (v != '' && v != 'noimport' && v !== undefined) {\n        rowHasValue = true;\n      }\n    });\n\n    if (rowHasValue) {\n      var $parentRow = $(this)\n        .prevUntil(':not(.element-sub-field)')\n        .addBack()\n        .prev();\n      var $lightswitch = $parentRow.find('.lightswitch').data('lightswitch');\n\n      $lightswitch.turnOn();\n    }\n  });\n\n  //\n  // Logs\n  //\n  $(document).on('click', '.log-detail-link', function (e) {\n    e.preventDefault();\n\n    var key = $(this).data('key');\n\n    $('tr[data-key=\"' + key + '\"]').toggleClass('hidden');\n  });\n\n  // Allow multiple submit actions, that trigger different actions as required\n  $(document).on('click', 'input[data-action]', function (e) {\n    var $form = $(this).parents('form');\n    var action = $(this).data('action');\n\n    $form.find('input[name=\"action\"]').val(action);\n    $form.submit();\n  });\n\n  $(document).on('change', '.log-type-form .select', function (e) {\n    e.preventDefault();\n\n    $(this).parents('form').submit();\n  });\n});\n","/**\n * sifter.js\n * Copyright (c) 2013 Brian Reavis & contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\n * file except in compliance with the License. You may obtain a copy of the License at:\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n * ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n *\n * @author Brian Reavis <brian@thirdroute.com>\n */\n\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define('sifter', factory);\n  } else if (typeof exports === 'object') {\n    module.exports = factory();\n  } else {\n    root.Sifter = factory();\n  }\n})(this, function () {\n  /**\n   * Textually searches arrays and hashes of objects\n   * by property (or multiple properties). Designed\n   * specifically for autocomplete.\n   *\n   * @constructor\n   * @param {array|object} items\n   * @param {object} items\n   */\n  var Sifter = function (items, settings) {\n    this.items = items;\n    this.settings = settings || {diacritics: true};\n  };\n\n  /**\n   * Splits a search string into an array of individual\n   * regexps to be used to match results.\n   *\n   * @param {string} query\n   * @returns {array}\n   */\n  Sifter.prototype.tokenize = function (query) {\n    query = trim(String(query || '').toLowerCase());\n    if (!query || !query.length) return [];\n\n    var i, n, regex, letter;\n    var tokens = [];\n    var words = query.split(/ +/);\n\n    for (i = 0, n = words.length; i < n; i++) {\n      regex = escape_regex(words[i]);\n      if (this.settings.diacritics) {\n        for (letter in DIACRITICS) {\n          if (DIACRITICS.hasOwnProperty(letter)) {\n            regex = regex.replace(new RegExp(letter, 'g'), DIACRITICS[letter]);\n          }\n        }\n      }\n      tokens.push({\n        string: words[i],\n        regex: new RegExp(regex, 'i'),\n      });\n    }\n\n    return tokens;\n  };\n\n  /**\n   * Iterates over arrays and hashes.\n   *\n   * ```\n   * this.iterator(this.items, function(item, id) {\n   *    // invoked for each item\n   * });\n   * ```\n   *\n   * @param {array|object} object\n   */\n  Sifter.prototype.iterator = function (object, callback) {\n    var iterator;\n    if (is_array(object)) {\n      iterator =\n        Array.prototype.forEach ||\n        function (callback) {\n          for (var i = 0, n = this.length; i < n; i++) {\n            callback(this[i], i, this);\n          }\n        };\n    } else {\n      iterator = function (callback) {\n        for (var key in this) {\n          if (this.hasOwnProperty(key)) {\n            callback(this[key], key, this);\n          }\n        }\n      };\n    }\n\n    iterator.apply(object, [callback]);\n  };\n\n  /**\n   * Returns a function to be used to score individual results.\n   *\n   * Good matches will have a higher score than poor matches.\n   * If an item is not a match, 0 will be returned by the function.\n   *\n   * @param {object|string} search\n   * @param {object} options (optional)\n   * @returns {function}\n   */\n  Sifter.prototype.getScoreFunction = function (search, options) {\n    var self, fields, tokens, token_count;\n\n    self = this;\n    search = self.prepareSearch(search, options);\n    tokens = search.tokens;\n    fields = search.options.fields;\n    token_count = tokens.length;\n\n    /**\n     * Calculates how close of a match the\n     * given value is against a search token.\n     *\n     * @param {mixed} value\n     * @param {object} token\n     * @return {number}\n     */\n    var scoreValue = function (value, token) {\n      var score, pos;\n\n      if (!value) return 0;\n      value = String(value || '');\n      pos = value.search(token.regex);\n      if (pos === -1) return 0;\n      score = token.string.length / value.length;\n      if (pos === 0) score += 0.5;\n      return score;\n    };\n\n    /**\n     * Calculates the score of an object\n     * against the search query.\n     *\n     * @param {object} token\n     * @param {object} data\n     * @return {number}\n     */\n    var scoreObject = (function () {\n      var field_count = fields.length;\n      if (!field_count) {\n        return function () {\n          return 0;\n        };\n      }\n      if (field_count === 1) {\n        return function (token, data) {\n          return scoreValue(data[fields[0]], token);\n        };\n      }\n      return function (token, data) {\n        for (var i = 0, sum = 0; i < field_count; i++) {\n          sum += scoreValue(data[fields[i]], token);\n        }\n        return sum / field_count;\n      };\n    })();\n\n    if (!token_count) {\n      return function () {\n        return 0;\n      };\n    }\n    if (token_count === 1) {\n      return function (data) {\n        return scoreObject(tokens[0], data);\n      };\n    }\n\n    if (search.options.conjunction === 'and') {\n      return function (data) {\n        var score;\n        for (var i = 0, sum = 0; i < token_count; i++) {\n          score = scoreObject(tokens[i], data);\n          if (score <= 0) return 0;\n          sum += score;\n        }\n        return sum / token_count;\n      };\n    } else {\n      return function (data) {\n        for (var i = 0, sum = 0; i < token_count; i++) {\n          sum += scoreObject(tokens[i], data);\n        }\n        return sum / token_count;\n      };\n    }\n  };\n\n  /**\n   * Returns a function that can be used to compare two\n   * results, for sorting purposes. If no sorting should\n   * be performed, `null` will be returned.\n   *\n   * @param {string|object} search\n   * @param {object} options\n   * @return function(a,b)\n   */\n  Sifter.prototype.getSortFunction = function (search, options) {\n    var i,\n      n,\n      self,\n      field,\n      fields,\n      fields_count,\n      multiplier,\n      multipliers,\n      get_field,\n      implicit_score,\n      sort;\n\n    self = this;\n    search = self.prepareSearch(search, options);\n    sort = (!search.query && options.sort_empty) || options.sort;\n\n    /**\n     * Fetches the specified sort field value\n     * from a search result item.\n     *\n     * @param  {string} name\n     * @param  {object} result\n     * @return {mixed}\n     */\n    get_field = function (name, result) {\n      if (name === '$score') return result.score;\n      return self.items[result.id][name];\n    };\n\n    // parse options\n    fields = [];\n    if (sort) {\n      for (i = 0, n = sort.length; i < n; i++) {\n        if (search.query || sort[i].field !== '$score') {\n          fields.push(sort[i]);\n        }\n      }\n    }\n\n    // the \"$score\" field is implied to be the primary\n    // sort field, unless it's manually specified\n    if (search.query) {\n      implicit_score = true;\n      for (i = 0, n = fields.length; i < n; i++) {\n        if (fields[i].field === '$score') {\n          implicit_score = false;\n          break;\n        }\n      }\n      if (implicit_score) {\n        fields.unshift({field: '$score', direction: 'desc'});\n      }\n    } else {\n      for (i = 0, n = fields.length; i < n; i++) {\n        if (fields[i].field === '$score') {\n          fields.splice(i, 1);\n          break;\n        }\n      }\n    }\n\n    multipliers = [];\n    for (i = 0, n = fields.length; i < n; i++) {\n      multipliers.push(fields[i].direction === 'desc' ? -1 : 1);\n    }\n\n    // build function\n    fields_count = fields.length;\n    if (!fields_count) {\n      return null;\n    } else if (fields_count === 1) {\n      field = fields[0].field;\n      multiplier = multipliers[0];\n      return function (a, b) {\n        return multiplier * cmp(get_field(field, a), get_field(field, b));\n      };\n    } else {\n      return function (a, b) {\n        var i, result, a_value, b_value, field;\n        for (i = 0; i < fields_count; i++) {\n          field = fields[i].field;\n          result =\n            multipliers[i] * cmp(get_field(field, a), get_field(field, b));\n          if (result) return result;\n        }\n        return 0;\n      };\n    }\n  };\n\n  /**\n   * Parses a search query and returns an object\n   * with tokens and fields ready to be populated\n   * with results.\n   *\n   * @param {string} query\n   * @param {object} options\n   * @returns {object}\n   */\n  Sifter.prototype.prepareSearch = function (query, options) {\n    if (typeof query === 'object') return query;\n\n    options = extend({}, options);\n\n    var option_fields = options.fields;\n    var option_sort = options.sort;\n    var option_sort_empty = options.sort_empty;\n\n    if (option_fields && !is_array(option_fields))\n      options.fields = [option_fields];\n    if (option_sort && !is_array(option_sort)) options.sort = [option_sort];\n    if (option_sort_empty && !is_array(option_sort_empty))\n      options.sort_empty = [option_sort_empty];\n\n    return {\n      options: options,\n      query: String(query || '').toLowerCase(),\n      tokens: this.tokenize(query),\n      total: 0,\n      items: [],\n    };\n  };\n\n  /**\n   * Searches through all items and returns a sorted array of matches.\n   *\n   * The `options` parameter can contain:\n   *\n   *   - fields {string|array}\n   *   - sort {array}\n   *   - score {function}\n   *   - filter {bool}\n   *   - limit {integer}\n   *\n   * Returns an object containing:\n   *\n   *   - options {object}\n   *   - query {string}\n   *   - tokens {array}\n   *   - total {int}\n   *   - items {array}\n   *\n   * @param {string} query\n   * @param {object} options\n   * @returns {object}\n   */\n  Sifter.prototype.search = function (query, options) {\n    var self = this,\n      value,\n      score,\n      search,\n      calculateScore;\n    var fn_sort;\n    var fn_score;\n\n    search = this.prepareSearch(query, options);\n    options = search.options;\n    query = search.query;\n\n    // generate result scoring function\n    fn_score = options.score || self.getScoreFunction(search);\n\n    // perform search and sort\n    if (query.length) {\n      self.iterator(self.items, function (item, id) {\n        score = fn_score(item);\n        if (options.filter === false || score > 0) {\n          search.items.push({score: score, id: id});\n        }\n      });\n    } else {\n      self.iterator(self.items, function (item, id) {\n        search.items.push({score: 1, id: id});\n      });\n    }\n\n    fn_sort = self.getSortFunction(search, options);\n    if (fn_sort) search.items.sort(fn_sort);\n\n    // apply limits\n    search.total = search.items.length;\n    if (typeof options.limit === 'number') {\n      search.items = search.items.slice(0, options.limit);\n    }\n\n    return search;\n  };\n\n  // utilities\n  // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n\n  var cmp = function (a, b) {\n    if (typeof a === 'number' && typeof b === 'number') {\n      return a > b ? 1 : a < b ? -1 : 0;\n    }\n    a = asciifold(String(a || ''));\n    b = asciifold(String(b || ''));\n    if (a > b) return 1;\n    if (b > a) return -1;\n    return 0;\n  };\n\n  var extend = function (a, b) {\n    var i, n, k, object;\n    for (i = 1, n = arguments.length; i < n; i++) {\n      object = arguments[i];\n      if (!object) continue;\n      for (k in object) {\n        if (object.hasOwnProperty(k)) {\n          a[k] = object[k];\n        }\n      }\n    }\n    return a;\n  };\n\n  var trim = function (str) {\n    return (str + '').replace(/^\\s+|\\s+$|/g, '');\n  };\n\n  var escape_regex = function (str) {\n    return (str + '').replace(/([.?*+^$[\\]\\\\(){}|-])/g, '\\\\$1');\n  };\n\n  var is_array =\n    Array.isArray ||\n    ($ && $.isArray) ||\n    function (object) {\n      return Object.prototype.toString.call(object) === '[object Array]';\n    };\n\n  var DIACRITICS = {\n    a: '[a]',\n    c: '[c]',\n    d: '[d]',\n    e: '[e]',\n    i: '[i]',\n    l: '[l]',\n    n: '[n]',\n    o: '[o]',\n    r: '[r]',\n    s: '[s]',\n    t: '[t]',\n    u: '[u]',\n    y: '[y]',\n    z: '[z]',\n  };\n\n  var asciifold = (function () {\n    var i, n, k, chunk;\n    var foreignletters = '';\n    var lookup = {};\n    for (k in DIACRITICS) {\n      if (DIACRITICS.hasOwnProperty(k)) {\n        chunk = DIACRITICS[k].substring(2, DIACRITICS[k].length - 1);\n        foreignletters += chunk;\n        for (i = 0, n = chunk.length; i < n; i++) {\n          lookup[chunk.charAt(i)] = k;\n        }\n      }\n    }\n    var regexp = new RegExp('[' + foreignletters + ']', 'g');\n    return function (str) {\n      return str\n        .replace(regexp, function (foreignletter) {\n          return lookup[foreignletter];\n        })\n        .toLowerCase();\n    };\n  })();\n\n  // export\n  // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n\n  return Sifter;\n});\n\n/**\n * microplugin.js\n * Copyright (c) 2013 Brian Reavis & contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\n * file except in compliance with the License. You may obtain a copy of the License at:\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n * ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n *\n * @author Brian Reavis <brian@thirdroute.com>\n */\n\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define('microplugin', factory);\n  } else if (typeof exports === 'object') {\n    module.exports = factory();\n  } else {\n    root.MicroPlugin = factory();\n  }\n})(this, function () {\n  var MicroPlugin = {};\n\n  MicroPlugin.mixin = function (Interface) {\n    Interface.plugins = {};\n\n    /**\n     * Initializes the listed plugins (with options).\n     * Acceptable formats:\n     *\n     * List (without options):\n     *   ['a', 'b', 'c']\n     *\n     * List (with options):\n     *   [{'name': 'a', options: {}}, {'name': 'b', options: {}}]\n     *\n     * Hash (with options):\n     *   {'a': { ... }, 'b': { ... }, 'c': { ... }}\n     *\n     * @param {mixed} plugins\n     */\n    Interface.prototype.initializePlugins = function (plugins) {\n      var i, n, key;\n      var self = this;\n      var queue = [];\n\n      self.plugins = {\n        names: [],\n        settings: {},\n        requested: {},\n        loaded: {},\n      };\n\n      if (utils.isArray(plugins)) {\n        for (i = 0, n = plugins.length; i < n; i++) {\n          if (typeof plugins[i] === 'string') {\n            queue.push(plugins[i]);\n          } else {\n            self.plugins.settings[plugins[i].name] = plugins[i].options;\n            queue.push(plugins[i].name);\n          }\n        }\n      } else if (plugins) {\n        for (key in plugins) {\n          if (plugins.hasOwnProperty(key)) {\n            self.plugins.settings[key] = plugins[key];\n            queue.push(key);\n          }\n        }\n      }\n\n      while (queue.length) {\n        self.require(queue.shift());\n      }\n    };\n\n    Interface.prototype.loadPlugin = function (name) {\n      var self = this;\n      var plugins = self.plugins;\n      var plugin = Interface.plugins[name];\n\n      if (!Interface.plugins.hasOwnProperty(name)) {\n        throw new Error('Unable to find \"' + name + '\" plugin');\n      }\n\n      plugins.requested[name] = true;\n      plugins.loaded[name] = plugin.fn.apply(self, [\n        self.plugins.settings[name] || {},\n      ]);\n      plugins.names.push(name);\n    };\n\n    /**\n     * Initializes a plugin.\n     *\n     * @param {string} name\n     */\n    Interface.prototype.require = function (name) {\n      var self = this;\n      var plugins = self.plugins;\n\n      if (!self.plugins.loaded.hasOwnProperty(name)) {\n        if (plugins.requested[name]) {\n          throw new Error('Plugin has circular dependency (\"' + name + '\")');\n        }\n        self.loadPlugin(name);\n      }\n\n      return plugins.loaded[name];\n    };\n\n    /**\n     * Registers a plugin.\n     *\n     * @param {string} name\n     * @param {function} fn\n     */\n    Interface.define = function (name, fn) {\n      Interface.plugins[name] = {\n        name: name,\n        fn: fn,\n      };\n    };\n  };\n\n  var utils = {\n    isArray:\n      Array.isArray ||\n      function (vArg) {\n        return Object.prototype.toString.call(vArg) === '[object Array]';\n      },\n  };\n\n  return MicroPlugin;\n});\n\n/**\n * selectize.js (v0.12.1)\n * Copyright (c) 20132015 Brian Reavis & contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\n * file except in compliance with the License. You may obtain a copy of the License at:\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n * ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n *\n * @author Brian Reavis <brian@thirdroute.com>\n */\n\n/*jshint curly:false */\n/*jshint browser:true */\n\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define('selectize', ['jquery', 'sifter', 'microplugin'], factory);\n  } else if (typeof exports === 'object') {\n    module.exports = factory(\n      require('jquery'),\n      require('sifter'),\n      require('microplugin')\n    );\n  } else {\n    root.Selectize = factory(root.jQuery, root.Sifter, root.MicroPlugin);\n  }\n})(this, function ($, Sifter, MicroPlugin) {\n  'use strict';\n\n  var highlight = function ($element, pattern) {\n    if (typeof pattern === 'string' && !pattern.length) return;\n    var regex =\n      typeof pattern === 'string' ? new RegExp(pattern, 'i') : pattern;\n\n    var highlight = function (node) {\n      var skip = 0;\n      if (node.nodeType === 3) {\n        var pos = node.data.search(regex);\n        if (pos >= 0 && node.data.length > 0) {\n          var match = node.data.match(regex);\n          var spannode = document.createElement('span');\n          spannode.className = 'highlight';\n          var middlebit = node.splitText(pos);\n          var endbit = middlebit.splitText(match[0].length);\n          var middleclone = middlebit.cloneNode(true);\n          spannode.appendChild(middleclone);\n          middlebit.parentNode.replaceChild(spannode, middlebit);\n          skip = 1;\n        }\n      } else if (\n        node.nodeType === 1 &&\n        node.childNodes &&\n        !/(script|style)/i.test(node.tagName)\n      ) {\n        for (var i = 0; i < node.childNodes.length; ++i) {\n          i += highlight(node.childNodes[i]);\n        }\n      }\n      return skip;\n    };\n\n    return $element.each(function () {\n      highlight(this);\n    });\n  };\n\n  var MicroEvent = function () {};\n  MicroEvent.prototype = {\n    on: function (event, fct) {\n      this._events = this._events || {};\n      this._events[event] = this._events[event] || [];\n      this._events[event].push(fct);\n    },\n    off: function (event, fct) {\n      var n = arguments.length;\n      if (n === 0) return delete this._events;\n      if (n === 1) return delete this._events[event];\n\n      this._events = this._events || {};\n      if (event in this._events === false) return;\n      this._events[event].splice(this._events[event].indexOf(fct), 1);\n    },\n    trigger: function (event /* , args... */) {\n      this._events = this._events || {};\n      if (event in this._events === false) return;\n      for (var i = 0; i < this._events[event].length; i++) {\n        this._events[event][i].apply(\n          this,\n          Array.prototype.slice.call(arguments, 1)\n        );\n      }\n    },\n  };\n\n  /**\n   * Mixin will delegate all MicroEvent.js function in the destination object.\n   *\n   * - MicroEvent.mixin(Foobar) will make Foobar able to use MicroEvent\n   *\n   * @param {object} the object which will support MicroEvent\n   */\n  MicroEvent.mixin = function (destObject) {\n    var props = ['on', 'off', 'trigger'];\n    for (var i = 0; i < props.length; i++) {\n      destObject.prototype[props[i]] = MicroEvent.prototype[props[i]];\n    }\n  };\n\n  var IS_MAC = /Mac/.test(navigator.userAgent);\n\n  var KEY_A = 65;\n  var KEY_COMMA = 188;\n  var KEY_RETURN = 13;\n  var KEY_ESC = 27;\n  var KEY_LEFT = 37;\n  var KEY_UP = 38;\n  var KEY_P = 80;\n  var KEY_RIGHT = 39;\n  var KEY_DOWN = 40;\n  var KEY_N = 78;\n  var KEY_BACKSPACE = 8;\n  var KEY_DELETE = 46;\n  var KEY_SHIFT = 16;\n  var KEY_CMD = IS_MAC ? 91 : 17;\n  var KEY_CTRL = IS_MAC ? 18 : 17;\n  var KEY_TAB = 9;\n\n  var TAG_SELECT = 1;\n  var TAG_INPUT = 2;\n\n  // for now, android support in general is too spotty to support validity\n  var SUPPORTS_VALIDITY_API =\n    !/android/i.test(window.navigator.userAgent) &&\n    !!document.createElement('form').validity;\n\n  var isset = function (object) {\n    return typeof object !== 'undefined';\n  };\n\n  /**\n   * Converts a scalar to its best string representation\n   * for hash keys and HTML attribute values.\n   *\n   * Transformations:\n   *   'str'     -> 'str'\n   *   null      -> ''\n   *   undefined -> ''\n   *   true      -> '1'\n   *   false     -> '0'\n   *   0         -> '0'\n   *   1         -> '1'\n   *\n   * @param {string} value\n   * @returns {string|null}\n   */\n  var hash_key = function (value) {\n    if (typeof value === 'undefined' || value === null) return null;\n    if (typeof value === 'boolean') return value ? '1' : '0';\n    return value + '';\n  };\n\n  /**\n   * Escapes a string for use within HTML.\n   *\n   * @param {string} str\n   * @returns {string}\n   */\n  var escape_html = function (str) {\n    return (str + '')\n      .replace(/&/g, '&amp;')\n      .replace(/</g, '&lt;')\n      .replace(/>/g, '&gt;')\n      .replace(/\"/g, '&quot;');\n  };\n\n  /**\n   * Escapes \"$\" characters in replacement strings.\n   *\n   * @param {string} str\n   * @returns {string}\n   */\n  var escape_replace = function (str) {\n    return (str + '').replace(/\\$/g, '$$$$');\n  };\n\n  var hook = {};\n\n  /**\n   * Wraps `method` on `self` so that `fn`\n   * is invoked before the original method.\n   *\n   * @param {object} self\n   * @param {string} method\n   * @param {function} fn\n   */\n  hook.before = function (self, method, fn) {\n    var original = self[method];\n    self[method] = function () {\n      fn.apply(self, arguments);\n      return original.apply(self, arguments);\n    };\n  };\n\n  /**\n   * Wraps `method` on `self` so that `fn`\n   * is invoked after the original method.\n   *\n   * @param {object} self\n   * @param {string} method\n   * @param {function} fn\n   */\n  hook.after = function (self, method, fn) {\n    var original = self[method];\n    self[method] = function () {\n      var result = original.apply(self, arguments);\n      fn.apply(self, arguments);\n      return result;\n    };\n  };\n\n  /**\n   * Wraps `fn` so that it can only be invoked once.\n   *\n   * @param {function} fn\n   * @returns {function}\n   */\n  var once = function (fn) {\n    var called = false;\n    return function () {\n      if (called) return;\n      called = true;\n      fn.apply(this, arguments);\n    };\n  };\n\n  /**\n   * Wraps `fn` so that it can only be called once\n   * every `delay` milliseconds (invoked on the falling edge).\n   *\n   * @param {function} fn\n   * @param {int} delay\n   * @returns {function}\n   */\n  var debounce = function (fn, delay) {\n    var timeout;\n    return function () {\n      var self = this;\n      var args = arguments;\n      window.clearTimeout(timeout);\n      timeout = window.setTimeout(function () {\n        fn.apply(self, args);\n      }, delay);\n    };\n  };\n\n  /**\n   * Debounce all fired events types listed in `types`\n   * while executing the provided `fn`.\n   *\n   * @param {object} self\n   * @param {array} types\n   * @param {function} fn\n   */\n  var debounce_events = function (self, types, fn) {\n    var type;\n    var trigger = self.trigger;\n    var event_args = {};\n\n    // override trigger method\n    self.trigger = function () {\n      var type = arguments[0];\n      if (types.indexOf(type) !== -1) {\n        event_args[type] = arguments;\n      } else {\n        return trigger.apply(self, arguments);\n      }\n    };\n\n    // invoke provided function\n    fn.apply(self, []);\n    self.trigger = trigger;\n\n    // trigger queued events\n    for (type in event_args) {\n      if (event_args.hasOwnProperty(type)) {\n        trigger.apply(self, event_args[type]);\n      }\n    }\n  };\n\n  /**\n   * A workaround for http://bugs.jquery.com/ticket/6696\n   *\n   * @param {object} $parent - Parent element to listen on.\n   * @param {string} event - Event name.\n   * @param {string} selector - Descendant selector to filter by.\n   * @param {function} fn - Event handler.\n   */\n  var watchChildEvent = function ($parent, event, selector, fn) {\n    $parent.on(event, selector, function (e) {\n      var child = e.target;\n      while (child && child.parentNode !== $parent[0]) {\n        child = child.parentNode;\n      }\n      e.currentTarget = child;\n      return fn.apply(this, [e]);\n    });\n  };\n\n  /**\n   * Determines the current selection within a text input control.\n   * Returns an object containing:\n   *   - start\n   *   - length\n   *\n   * @param {object} input\n   * @returns {object}\n   */\n  var getSelection = function (input) {\n    var result = {};\n    if ('selectionStart' in input) {\n      result.start = input.selectionStart;\n      result.length = input.selectionEnd - result.start;\n    } else if (document.selection) {\n      input.focus();\n      var sel = document.selection.createRange();\n      var selLen = document.selection.createRange().text.length;\n      sel.moveStart('character', -input.value.length);\n      result.start = sel.text.length - selLen;\n      result.length = selLen;\n    }\n    return result;\n  };\n\n  /**\n   * Copies CSS properties from one element to another.\n   *\n   * @param {object} $from\n   * @param {object} $to\n   * @param {array} properties\n   */\n  var transferStyles = function ($from, $to, properties) {\n    var i,\n      n,\n      styles = {};\n    if (properties) {\n      for (i = 0, n = properties.length; i < n; i++) {\n        styles[properties[i]] = $from.css(properties[i]);\n      }\n    } else {\n      styles = $from.css();\n    }\n    $to.css(styles);\n  };\n\n  /**\n   * Measures the width of a string within a\n   * parent element (in pixels).\n   *\n   * @param {string} str\n   * @param {object} $parent\n   * @returns {int}\n   */\n  var measureString = function (str, $parent) {\n    if (!str) {\n      return 0;\n    }\n\n    var $test = $('<test>')\n      .css({\n        position: 'absolute',\n        top: -99999,\n        left: -99999,\n        width: 'auto',\n        padding: 0,\n        whiteSpace: 'pre',\n      })\n      .text(str)\n      .appendTo('body');\n\n    transferStyles($parent, $test, [\n      'letterSpacing',\n      'fontSize',\n      'fontFamily',\n      'fontWeight',\n      'textTransform',\n    ]);\n\n    var width = $test.width();\n    $test.remove();\n\n    return width;\n  };\n\n  /**\n   * Sets up an input to grow horizontally as the user\n   * types. If the value is changed manually, you can\n   * trigger the \"update\" handler to resize:\n   *\n   * $input.trigger('update');\n   *\n   * @param {object} $input\n   */\n  var autoGrow = function ($input) {\n    var currentWidth = null;\n\n    var update = function (e, options) {\n      var value, keyCode, printable, placeholder, width;\n      var shift, character, selection;\n      e = e || window.event || {};\n      options = options || {};\n\n      if (e.metaKey || e.altKey) return;\n      if (!options.force && $input.data('grow') === false) return;\n\n      value = $input.val();\n      if (e.type && e.type.toLowerCase() === 'keydown') {\n        keyCode = e.keyCode;\n        printable =\n          (keyCode >= 97 && keyCode <= 122) || // a-z\n          (keyCode >= 65 && keyCode <= 90) || // A-Z\n          (keyCode >= 48 && keyCode <= 57) || // 0-9\n          keyCode === 32; // space\n\n        if (keyCode === KEY_DELETE || keyCode === KEY_BACKSPACE) {\n          selection = getSelection($input[0]);\n          if (selection.length) {\n            value =\n              value.substring(0, selection.start) +\n              value.substring(selection.start + selection.length);\n          } else if (keyCode === KEY_BACKSPACE && selection.start) {\n            value =\n              value.substring(0, selection.start - 1) +\n              value.substring(selection.start + 1);\n          } else if (\n            keyCode === KEY_DELETE &&\n            typeof selection.start !== 'undefined'\n          ) {\n            value =\n              value.substring(0, selection.start) +\n              value.substring(selection.start + 1);\n          }\n        } else if (printable) {\n          shift = e.shiftKey;\n          character = String.fromCharCode(e.keyCode);\n          if (shift) character = character.toUpperCase();\n          else character = character.toLowerCase();\n          value += character;\n        }\n      }\n\n      placeholder = $input.attr('placeholder');\n      if (!value && placeholder) {\n        value = placeholder;\n      }\n\n      width = measureString(value, $input) + 4;\n      if (width !== currentWidth) {\n        currentWidth = width;\n        $input.width(width);\n        $input.triggerHandler('resize');\n      }\n    };\n\n    $input.on('keydown keyup update blur', update);\n    update();\n  };\n\n  var Selectize = function ($input, settings) {\n    var key,\n      i,\n      n,\n      dir,\n      input,\n      self = this;\n    input = $input[0];\n    input.selectize = self;\n\n    // detect rtl environment\n    var computedStyle =\n      window.getComputedStyle && window.getComputedStyle(input, null);\n    dir = computedStyle\n      ? computedStyle.getPropertyValue('direction')\n      : input.currentStyle && input.currentStyle.direction;\n    dir = dir || $input.parents('[dir]:first').attr('dir') || '';\n\n    // setup default state\n    $.extend(self, {\n      order: 0,\n      settings: settings,\n      $input: $input,\n      tabIndex: $input.attr('tabindex') || '',\n      tagType:\n        input.tagName.toLowerCase() === 'select' ? TAG_SELECT : TAG_INPUT,\n      rtl: /rtl/i.test(dir),\n\n      eventNS: '.selectize' + ++Selectize.count,\n      highlightedValue: null,\n      isOpen: false,\n      isDisabled: false,\n      isRequired: $input.is('[required]'),\n      isInvalid: false,\n      isLocked: false,\n      isFocused: false,\n      isInputHidden: false,\n      isSetup: false,\n      isShiftDown: false,\n      isCmdDown: false,\n      isCtrlDown: false,\n      ignoreFocus: false,\n      ignoreBlur: false,\n      ignoreHover: false,\n      hasOptions: false,\n      currentResults: null,\n      lastValue: '',\n      caretPos: 0,\n      loading: 0,\n      loadedSearches: {},\n\n      $activeOption: null,\n      $activeItems: [],\n\n      optgroups: {},\n      options: {},\n      userOptions: {},\n      items: [],\n      renderCache: {},\n      onSearchChange:\n        settings.loadThrottle === null\n          ? self.onSearchChange\n          : debounce(self.onSearchChange, settings.loadThrottle),\n    });\n\n    // search system\n    self.sifter = new Sifter(this.options, {diacritics: settings.diacritics});\n\n    // build options table\n    if (self.settings.options) {\n      for (i = 0, n = self.settings.options.length; i < n; i++) {\n        self.registerOption(self.settings.options[i]);\n      }\n      delete self.settings.options;\n    }\n\n    // build optgroup table\n    if (self.settings.optgroups) {\n      for (i = 0, n = self.settings.optgroups.length; i < n; i++) {\n        self.registerOptionGroup(self.settings.optgroups[i]);\n      }\n      delete self.settings.optgroups;\n    }\n\n    // option-dependent defaults\n    self.settings.mode =\n      self.settings.mode || (self.settings.maxItems === 1 ? 'single' : 'multi');\n    if (typeof self.settings.hideSelected !== 'boolean') {\n      self.settings.hideSelected = self.settings.mode === 'multi';\n    }\n\n    self.initializePlugins(self.settings.plugins);\n    self.setupCallbacks();\n    self.setupTemplates();\n    self.setup();\n  };\n\n  // mixins\n  // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n\n  MicroEvent.mixin(Selectize);\n  MicroPlugin.mixin(Selectize);\n\n  // methods\n  // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n\n  $.extend(Selectize.prototype, {\n    /**\n     * Creates all elements and sets up event bindings.\n     */\n    setup: function () {\n      var self = this;\n      var settings = self.settings;\n      var eventNS = self.eventNS;\n      var $window = $(window);\n      var $document = $(document);\n      var $input = self.$input;\n\n      var $wrapper;\n      var $control;\n      var $control_input;\n      var $dropdown;\n      var $dropdown_content;\n      var $dropdown_parent;\n      var inputMode;\n      var timeout_blur;\n      var timeout_focus;\n      var classes;\n      var classes_plugins;\n\n      inputMode = self.settings.mode;\n      classes = $input.attr('class') || '';\n\n      $wrapper = $('<div>')\n        .addClass(settings.wrapperClass)\n        .addClass(classes)\n        .addClass(inputMode);\n      $control = $('<div>')\n        .addClass(settings.inputClass)\n        .addClass('items')\n        .appendTo($wrapper);\n      /* HACK */\n      //$control_input    = $('<input type=\"text\" autocomplete=\"off\" />').appendTo($control).attr('tabindex', $input.is(':disabled') ? '-1' : self.tabIndex);\n      $control_input = $('<input type=\"text\" autocomplete=\"false\" />')\n        .appendTo($control)\n        .attr('tabindex', $input.is(':disabled') ? '-1' : self.tabIndex);\n      /* END HACK */\n      $dropdown_parent = $(settings.dropdownParent || $wrapper);\n      $dropdown = $('<div>')\n        .addClass(settings.dropdownClass)\n        .addClass(inputMode)\n        .hide()\n        .appendTo($dropdown_parent);\n      $dropdown_content = $('<div>')\n        .addClass(settings.dropdownContentClass)\n        .appendTo($dropdown);\n\n      if (self.settings.copyClassesToDropdown) {\n        $dropdown.addClass(classes);\n      }\n\n      $wrapper.css({\n        width: $input[0].style.width,\n      });\n\n      if (self.plugins.names.length) {\n        classes_plugins = 'plugin-' + self.plugins.names.join(' plugin-');\n        $wrapper.addClass(classes_plugins);\n        $dropdown.addClass(classes_plugins);\n      }\n\n      if (\n        (settings.maxItems === null || settings.maxItems > 1) &&\n        self.tagType === TAG_SELECT\n      ) {\n        $input.attr('multiple', 'multiple');\n      }\n\n      if (self.settings.placeholder) {\n        $control_input.attr('placeholder', settings.placeholder);\n      }\n\n      // if splitOn was not passed in, construct it from the delimiter to allow pasting universally\n      if (!self.settings.splitOn && self.settings.delimiter) {\n        var delimiterEscaped = self.settings.delimiter.replace(\n          /[-\\/\\\\^$*+?.()|[\\]{}]/g,\n          '\\\\$&'\n        );\n        self.settings.splitOn = new RegExp('\\\\s*' + delimiterEscaped + '+\\\\s*');\n      }\n\n      if ($input.attr('autocorrect')) {\n        $control_input.attr('autocorrect', $input.attr('autocorrect'));\n      }\n\n      if ($input.attr('autocapitalize')) {\n        $control_input.attr('autocapitalize', $input.attr('autocapitalize'));\n      }\n\n      self.$wrapper = $wrapper;\n      self.$control = $control;\n      self.$control_input = $control_input;\n      self.$dropdown = $dropdown;\n      self.$dropdown_content = $dropdown_content;\n\n      $dropdown.on('mouseenter', '[data-selectable]', function () {\n        return self.onOptionHover.apply(self, arguments);\n      });\n      $dropdown.on('mousedown click', '[data-selectable]', function () {\n        return self.onOptionSelect.apply(self, arguments);\n      });\n      watchChildEvent($control, 'mousedown', '*:not(input)', function () {\n        return self.onItemSelect.apply(self, arguments);\n      });\n      autoGrow($control_input);\n\n      $control.on({\n        mousedown: function () {\n          return self.onMouseDown.apply(self, arguments);\n        },\n        click: function () {\n          return self.onClick.apply(self, arguments);\n        },\n      });\n\n      $control_input.on({\n        mousedown: function (e) {\n          e.stopPropagation();\n        },\n        keydown: function () {\n          return self.onKeyDown.apply(self, arguments);\n        },\n        keyup: function () {\n          return self.onKeyUp.apply(self, arguments);\n        },\n        keypress: function () {\n          return self.onKeyPress.apply(self, arguments);\n        },\n        resize: function () {\n          self.positionDropdown.apply(self, []);\n        },\n        blur: function () {\n          return self.onBlur.apply(self, arguments);\n        },\n        focus: function () {\n          self.ignoreBlur = false;\n          return self.onFocus.apply(self, arguments);\n        },\n        paste: function () {\n          return self.onPaste.apply(self, arguments);\n        },\n      });\n\n      $document.on('keydown' + eventNS, function (e) {\n        self.isCmdDown = e[IS_MAC ? 'metaKey' : 'ctrlKey'];\n        self.isCtrlDown = e[IS_MAC ? 'altKey' : 'ctrlKey'];\n        self.isShiftDown = e.shiftKey;\n      });\n\n      $document.on('keyup' + eventNS, function (e) {\n        if (e.keyCode === KEY_CTRL) self.isCtrlDown = false;\n        if (e.keyCode === KEY_SHIFT) self.isShiftDown = false;\n        if (e.keyCode === KEY_CMD) self.isCmdDown = false;\n      });\n\n      $document.on('mousedown' + eventNS, function (e) {\n        if (self.isFocused) {\n          // prevent events on the dropdown scrollbar from causing the control to blur\n          if (\n            e.target === self.$dropdown[0] ||\n            e.target.parentNode === self.$dropdown[0]\n          ) {\n            return false;\n          }\n          // blur on click outside\n          if (\n            !self.$control.has(e.target).length &&\n            e.target !== self.$control[0]\n          ) {\n            self.blur(e.target);\n          }\n        }\n      });\n\n      $window.on(\n        ['scroll' + eventNS, 'resize' + eventNS].join(' '),\n        function () {\n          if (self.isOpen) {\n            self.positionDropdown.apply(self, arguments);\n          }\n        }\n      );\n      $window.on('mousemove' + eventNS, function () {\n        self.ignoreHover = false;\n      });\n\n      // store original children and tab index so that they can be\n      // restored when the destroy() method is called.\n      this.revertSettings = {\n        $children: $input.children().detach(),\n        tabindex: $input.attr('tabindex'),\n      };\n\n      $input.attr('tabindex', -1).hide().after(self.$wrapper);\n\n      if ($.isArray(settings.items)) {\n        self.setValue(settings.items);\n        delete settings.items;\n      }\n\n      // feature detect for the validation API\n      if (SUPPORTS_VALIDITY_API) {\n        $input.on('invalid' + eventNS, function (e) {\n          e.preventDefault();\n          self.isInvalid = true;\n          self.refreshState();\n        });\n      }\n\n      self.updateOriginalInput();\n      self.refreshItems();\n      self.refreshState();\n      self.updatePlaceholder();\n      self.isSetup = true;\n\n      if ($input.is(':disabled')) {\n        self.disable();\n      }\n\n      self.on('change', this.onChange);\n\n      $input.data('selectize', self);\n      $input.addClass('selectized');\n      self.trigger('initialize');\n\n      // preload options\n      if (settings.preload === true) {\n        self.onSearchChange('');\n      }\n    },\n\n    /**\n     * Sets up default rendering functions.\n     */\n    setupTemplates: function () {\n      var self = this;\n      var field_label = self.settings.labelField;\n      var field_optgroup = self.settings.optgroupLabelField;\n\n      var templates = {\n        optgroup: function (data) {\n          return '<div class=\"optgroup\">' + data.html + '</div>';\n        },\n        optgroup_header: function (data, escape) {\n          return (\n            '<div class=\"optgroup-header\">' +\n            escape(data[field_optgroup]) +\n            '</div>'\n          );\n        },\n        option: function (data, escape) {\n          return '<div class=\"option\">' + escape(data[field_label]) + '</div>';\n        },\n        item: function (data, escape) {\n          return '<div class=\"item\">' + escape(data[field_label]) + '</div>';\n        },\n        option_create: function (data, escape) {\n          return (\n            '<div class=\"create\">Add <strong>' +\n            escape(data.input) +\n            '</strong>&hellip;</div>'\n          );\n        },\n      };\n\n      self.settings.render = $.extend({}, templates, self.settings.render);\n    },\n\n    /**\n     * Maps fired events to callbacks provided\n     * in the settings used when creating the control.\n     */\n    setupCallbacks: function () {\n      var key,\n        fn,\n        callbacks = {\n          initialize: 'onInitialize',\n          change: 'onChange',\n          item_add: 'onItemAdd',\n          item_remove: 'onItemRemove',\n          clear: 'onClear',\n          option_add: 'onOptionAdd',\n          option_remove: 'onOptionRemove',\n          option_clear: 'onOptionClear',\n          optgroup_add: 'onOptionGroupAdd',\n          optgroup_remove: 'onOptionGroupRemove',\n          optgroup_clear: 'onOptionGroupClear',\n          dropdown_open: 'onDropdownOpen',\n          dropdown_close: 'onDropdownClose',\n          type: 'onType',\n          load: 'onLoad',\n          focus: 'onFocus',\n          blur: 'onBlur',\n        };\n\n      for (key in callbacks) {\n        if (callbacks.hasOwnProperty(key)) {\n          fn = this.settings[callbacks[key]];\n          if (fn) this.on(key, fn);\n        }\n      }\n    },\n\n    /**\n     * Triggered when the main control element\n     * has a click event.\n     *\n     * @param {object} e\n     * @return {boolean}\n     */\n    onClick: function (e) {\n      var self = this;\n\n      // necessary for mobile webkit devices (manual focus triggering\n      // is ignored unless invoked within a click event)\n      if (!self.isFocused) {\n        self.focus();\n        e.preventDefault();\n      }\n    },\n\n    /**\n     * Triggered when the main control element\n     * has a mouse down event.\n     *\n     * @param {object} e\n     * @return {boolean}\n     */\n    onMouseDown: function (e) {\n      var self = this;\n      var defaultPrevented = e.isDefaultPrevented();\n      var $target = $(e.target);\n\n      if (self.isFocused) {\n        // retain focus by preventing native handling. if the\n        // event target is the input it should not be modified.\n        // otherwise, text selection within the input won't work.\n        if (e.target !== self.$control_input[0]) {\n          if (self.settings.mode === 'single') {\n            // toggle dropdown\n            self.isOpen ? self.close() : self.open();\n          } else if (!defaultPrevented) {\n            self.setActiveItem(null);\n          }\n          return false;\n        }\n      } else {\n        // give control focus\n        if (!defaultPrevented) {\n          window.setTimeout(function () {\n            self.focus();\n          }, 0);\n        }\n      }\n    },\n\n    /**\n     * Triggered when the value of the control has been changed.\n     * This should propagate the event to the original DOM\n     * input / select element.\n     */\n    onChange: function () {\n      this.$input.trigger('change');\n    },\n\n    /**\n     * Triggered on <input> paste.\n     *\n     * @param {object} e\n     * @returns {boolean}\n     */\n    onPaste: function (e) {\n      var self = this;\n      if (self.isFull() || self.isInputHidden || self.isLocked) {\n        e.preventDefault();\n      } else {\n        // If a regex or string is included, this will split the pasted\n        // input and create Items for each separate value\n        if (self.settings.splitOn) {\n          setTimeout(function () {\n            var splitInput = $.trim(self.$control_input.val() || '').split(\n              self.settings.splitOn\n            );\n            for (var i = 0, n = splitInput.length; i < n; i++) {\n              self.createItem(splitInput[i]);\n            }\n          }, 0);\n        }\n      }\n    },\n\n    /**\n     * Triggered on <input> keypress.\n     *\n     * @param {object} e\n     * @returns {boolean}\n     */\n    onKeyPress: function (e) {\n      if (this.isLocked) return e && e.preventDefault();\n      var character = String.fromCharCode(e.keyCode || e.which);\n      if (\n        this.settings.create &&\n        this.settings.mode === 'multi' &&\n        character === this.settings.delimiter\n      ) {\n        this.createItem();\n        e.preventDefault();\n        return false;\n      }\n    },\n\n    /**\n     * Triggered on <input> keydown.\n     *\n     * @param {object} e\n     * @returns {boolean}\n     */\n    onKeyDown: function (e) {\n      var isInput = e.target === this.$control_input[0];\n      var self = this;\n\n      if (self.isLocked) {\n        if (e.keyCode !== KEY_TAB) {\n          e.preventDefault();\n        }\n        return;\n      }\n\n      switch (e.keyCode) {\n        case KEY_A:\n          if (self.isCmdDown) {\n            self.selectAll();\n            return;\n          }\n          break;\n        case KEY_ESC:\n          if (self.isOpen) {\n            e.preventDefault();\n            e.stopPropagation();\n            self.close();\n          }\n          return;\n        case KEY_N:\n          if (!e.ctrlKey || e.altKey) break;\n        case KEY_DOWN:\n          if (!self.isOpen && self.hasOptions) {\n            self.open();\n          } else if (self.$activeOption) {\n            self.ignoreHover = true;\n            var $next = self.getAdjacentOption(self.$activeOption, 1);\n            if ($next.length) self.setActiveOption($next, true, true);\n          }\n          e.preventDefault();\n          return;\n        case KEY_P:\n          if (!e.ctrlKey || e.altKey) break;\n        case KEY_UP:\n          if (self.$activeOption) {\n            self.ignoreHover = true;\n            var $prev = self.getAdjacentOption(self.$activeOption, -1);\n            if ($prev.length) self.setActiveOption($prev, true, true);\n          }\n          e.preventDefault();\n          return;\n        case KEY_RETURN:\n          if (self.isOpen && self.$activeOption) {\n            self.onOptionSelect({currentTarget: self.$activeOption});\n            e.preventDefault();\n          }\n          return;\n        case KEY_LEFT:\n          self.advanceSelection(-1, e);\n          return;\n        case KEY_RIGHT:\n          self.advanceSelection(1, e);\n          return;\n        case KEY_TAB:\n          if (self.settings.selectOnTab && self.isOpen && self.$activeOption) {\n            self.onOptionSelect({currentTarget: self.$activeOption});\n\n            // Default behaviour is to jump to the next field, we only want this\n            // if the current field doesn't accept any more entries\n            if (!self.isFull()) {\n              e.preventDefault();\n            }\n          }\n          if (self.settings.create && self.createItem()) {\n            e.preventDefault();\n          }\n          return;\n        case KEY_BACKSPACE:\n        case KEY_DELETE:\n          self.deleteSelection(e);\n          return;\n      }\n\n      if (\n        (self.isFull() || self.isInputHidden) &&\n        !(IS_MAC ? e.metaKey : e.ctrlKey)\n      ) {\n        e.preventDefault();\n        return;\n      }\n    },\n\n    /**\n     * Triggered on <input> keyup.\n     *\n     * @param {object} e\n     * @returns {boolean}\n     */\n    onKeyUp: function (e) {\n      var self = this;\n\n      if (self.isLocked) return e && e.preventDefault();\n      var value = self.$control_input.val() || '';\n      if (self.lastValue !== value) {\n        self.lastValue = value;\n        self.onSearchChange(value);\n        self.refreshOptions();\n        self.trigger('type', value);\n      }\n    },\n\n    /**\n     * Invokes the user-provide option provider / loader.\n     *\n     * Note: this function is debounced in the Selectize\n     * constructor (by `settings.loadDelay` milliseconds)\n     *\n     * @param {string} value\n     */\n    onSearchChange: function (value) {\n      var self = this;\n      var fn = self.settings.load;\n      if (!fn) return;\n      if (self.loadedSearches.hasOwnProperty(value)) return;\n      self.loadedSearches[value] = true;\n      self.load(function (callback) {\n        fn.apply(self, [value, callback]);\n      });\n    },\n\n    /**\n     * Triggered on <input> focus.\n     *\n     * @param {object} e (optional)\n     * @returns {boolean}\n     */\n    onFocus: function (e) {\n      var self = this;\n      var wasFocused = self.isFocused;\n\n      if (self.isDisabled) {\n        self.blur();\n        e && e.preventDefault();\n        return false;\n      }\n\n      if (self.ignoreFocus) return;\n      self.isFocused = true;\n      if (self.settings.preload === 'focus') self.onSearchChange('');\n\n      if (!wasFocused) self.trigger('focus');\n\n      if (!self.$activeItems.length) {\n        self.showInput();\n        self.setActiveItem(null);\n        self.refreshOptions(!!self.settings.openOnFocus);\n      }\n\n      self.refreshState();\n    },\n\n    /**\n     * Triggered on <input> blur.\n     *\n     * @param {object} e\n     * @param {Element} dest\n     */\n    onBlur: function (e, dest) {\n      var self = this;\n      if (!self.isFocused) return;\n      self.isFocused = false;\n\n      if (self.ignoreFocus) {\n        return;\n      } else if (\n        !self.ignoreBlur &&\n        document.activeElement === self.$dropdown_content[0]\n      ) {\n        // necessary to prevent IE closing the dropdown when the scrollbar is clicked\n        self.ignoreBlur = true;\n        self.onFocus(e);\n        return;\n      }\n\n      var deactivate = function () {\n        self.close();\n        self.setTextboxValue('');\n        self.setActiveItem(null);\n        self.setActiveOption(null);\n        self.setCaret(self.items.length);\n        self.refreshState();\n\n        // IE11 bug: element still marked as active\n        (dest || document.body).focus();\n\n        self.ignoreFocus = false;\n        self.trigger('blur');\n      };\n\n      self.ignoreFocus = true;\n      if (self.settings.create && self.settings.createOnBlur) {\n        self.createItem(null, false, deactivate);\n      } else {\n        deactivate();\n      }\n    },\n\n    /**\n     * Triggered when the user rolls over\n     * an option in the autocomplete dropdown menu.\n     *\n     * @param {object} e\n     * @returns {boolean}\n     */\n    onOptionHover: function (e) {\n      if (this.ignoreHover) return;\n      this.setActiveOption(e.currentTarget, false);\n    },\n\n    /**\n     * Triggered when the user clicks on an option\n     * in the autocomplete dropdown menu.\n     *\n     * @param {object} e\n     * @returns {boolean}\n     */\n    onOptionSelect: function (e) {\n      var value,\n        $target,\n        $option,\n        self = this;\n\n      if (e.preventDefault) {\n        e.preventDefault();\n        e.stopPropagation();\n      }\n\n      $target = $(e.currentTarget);\n      if ($target.hasClass('create')) {\n        self.createItem(null, function () {\n          if (self.settings.closeAfterSelect) {\n            self.close();\n          }\n        });\n      } else {\n        value = $target.attr('data-value');\n        if (typeof value !== 'undefined') {\n          self.lastQuery = null;\n          self.setTextboxValue('');\n          self.addItem(value);\n          if (self.settings.closeAfterSelect) {\n            self.close();\n          } else if (\n            !self.settings.hideSelected &&\n            e.type &&\n            /mouse/.test(e.type)\n          ) {\n            self.setActiveOption(self.getOption(value));\n          }\n        }\n      }\n    },\n\n    /**\n     * Triggered when the user clicks on an item\n     * that has been selected.\n     *\n     * @param {object} e\n     * @returns {boolean}\n     */\n    onItemSelect: function (e) {\n      var self = this;\n\n      if (self.isLocked) return;\n      if (self.settings.mode === 'multi') {\n        e.preventDefault();\n        self.setActiveItem(e.currentTarget, e);\n      }\n    },\n\n    /**\n     * Invokes the provided method that provides\n     * results to a callback---which are then added\n     * as options to the control.\n     *\n     * @param {function} fn\n     */\n    load: function (fn) {\n      var self = this;\n      var $wrapper = self.$wrapper.addClass(self.settings.loadingClass);\n\n      self.loading++;\n      fn.apply(self, [\n        function (results) {\n          self.loading = Math.max(self.loading - 1, 0);\n          if (results && results.length) {\n            self.addOption(results);\n            self.refreshOptions(self.isFocused && !self.isInputHidden);\n          }\n          if (!self.loading) {\n            $wrapper.removeClass(self.settings.loadingClass);\n          }\n          self.trigger('load', results);\n        },\n      ]);\n    },\n\n    /**\n     * Sets the input field of the control to the specified value.\n     *\n     * @param {string} value\n     */\n    setTextboxValue: function (value) {\n      var $input = this.$control_input;\n      var changed = $input.val() !== value;\n      if (changed) {\n        $input.val(value).triggerHandler('update');\n        this.lastValue = value;\n      }\n    },\n\n    /**\n     * Returns the value of the control. If multiple items\n     * can be selected (e.g. <select multiple>), this returns\n     * an array. If only one item can be selected, this\n     * returns a string.\n     *\n     * @returns {mixed}\n     */\n    getValue: function () {\n      if (this.tagType === TAG_SELECT && this.$input.attr('multiple')) {\n        return this.items;\n      } else {\n        return this.items.join(this.settings.delimiter);\n      }\n    },\n\n    /**\n     * Resets the selected items to the given value.\n     *\n     * @param {mixed} value\n     */\n    setValue: function (value, silent) {\n      var events = silent ? [] : ['change'];\n\n      debounce_events(this, events, function () {\n        this.clear(silent);\n        this.addItems(value, silent);\n      });\n    },\n\n    /**\n     * Sets the selected item.\n     *\n     * @param {object} $item\n     * @param {object} e (optional)\n     */\n    setActiveItem: function ($item, e) {\n      var self = this;\n      var eventName;\n      var i, idx, begin, end, item, swap;\n      var $last;\n\n      if (self.settings.mode === 'single') return;\n      $item = $($item);\n\n      // clear the active selection\n      if (!$item.length) {\n        $(self.$activeItems).removeClass('active');\n        self.$activeItems = [];\n        if (self.isFocused) {\n          self.showInput();\n        }\n        return;\n      }\n\n      // modify selection\n      eventName = e && e.type.toLowerCase();\n\n      if (\n        eventName === 'mousedown' &&\n        self.isShiftDown &&\n        self.$activeItems.length\n      ) {\n        $last = self.$control.children('.active:last');\n        begin = Array.prototype.indexOf.apply(self.$control[0].childNodes, [\n          $last[0],\n        ]);\n        end = Array.prototype.indexOf.apply(self.$control[0].childNodes, [\n          $item[0],\n        ]);\n        if (begin > end) {\n          swap = begin;\n          begin = end;\n          end = swap;\n        }\n        for (i = begin; i <= end; i++) {\n          item = self.$control[0].childNodes[i];\n          if (self.$activeItems.indexOf(item) === -1) {\n            $(item).addClass('active');\n            self.$activeItems.push(item);\n          }\n        }\n        e.preventDefault();\n      } else if (\n        (eventName === 'mousedown' && self.isCtrlDown) ||\n        (eventName === 'keydown' && this.isShiftDown)\n      ) {\n        if ($item.hasClass('active')) {\n          idx = self.$activeItems.indexOf($item[0]);\n          self.$activeItems.splice(idx, 1);\n          $item.removeClass('active');\n        } else {\n          self.$activeItems.push($item.addClass('active')[0]);\n        }\n      } else {\n        $(self.$activeItems).removeClass('active');\n        self.$activeItems = [$item.addClass('active')[0]];\n      }\n\n      // ensure control has focus\n      self.hideInput();\n      if (!this.isFocused) {\n        self.focus();\n      }\n    },\n\n    /**\n     * Sets the selected item in the dropdown menu\n     * of available options.\n     *\n     * @param {object} $object\n     * @param {boolean} scroll\n     * @param {boolean} animate\n     */\n    setActiveOption: function ($option, scroll, animate) {\n      var height_menu, height_item, y;\n      var scroll_top, scroll_bottom;\n      var self = this;\n\n      if (self.$activeOption) self.$activeOption.removeClass('active');\n      self.$activeOption = null;\n\n      $option = $($option);\n      if (!$option.length) return;\n\n      self.$activeOption = $option.addClass('active');\n\n      if (scroll || !isset(scroll)) {\n        height_menu = self.$dropdown_content.height();\n        height_item = self.$activeOption.outerHeight(true);\n        scroll = self.$dropdown_content.scrollTop() || 0;\n        y =\n          self.$activeOption.offset().top -\n          self.$dropdown_content.offset().top +\n          scroll;\n        scroll_top = y;\n        scroll_bottom = y - height_menu + height_item;\n\n        if (y + height_item > height_menu + scroll) {\n          self.$dropdown_content\n            .stop()\n            .animate(\n              {scrollTop: scroll_bottom},\n              animate ? self.settings.scrollDuration : 0\n            );\n        } else if (y < scroll) {\n          self.$dropdown_content\n            .stop()\n            .animate(\n              {scrollTop: scroll_top},\n              animate ? self.settings.scrollDuration : 0\n            );\n        }\n      }\n    },\n\n    /**\n     * Selects all items (CTRL + A).\n     */\n    selectAll: function () {\n      var self = this;\n      if (self.settings.mode === 'single') return;\n\n      self.$activeItems = Array.prototype.slice.apply(\n        self.$control.children(':not(input)').addClass('active')\n      );\n      if (self.$activeItems.length) {\n        self.hideInput();\n        self.close();\n      }\n      self.focus();\n    },\n\n    /**\n     * Hides the input element out of view, while\n     * retaining its focus.\n     */\n    hideInput: function () {\n      var self = this;\n\n      self.setTextboxValue('');\n      self.$control_input.css({\n        opacity: 0,\n        position: 'absolute',\n        left: self.rtl ? 10000 : -10000,\n      });\n      self.isInputHidden = true;\n    },\n\n    /**\n     * Restores input visibility.\n     */\n    showInput: function () {\n      this.$control_input.css({opacity: 1, position: 'relative', left: 0});\n      this.isInputHidden = false;\n    },\n\n    /**\n     * Gives the control focus.\n     */\n    focus: function () {\n      var self = this;\n      if (self.isDisabled) return;\n\n      self.ignoreFocus = true;\n      self.$control_input[0].focus();\n      window.setTimeout(function () {\n        self.ignoreFocus = false;\n        self.onFocus();\n      }, 0);\n    },\n\n    /**\n     * Forces the control out of focus.\n     *\n     * @param {Element} dest\n     */\n    blur: function (dest) {\n      this.$control_input[0].blur();\n      this.onBlur(null, dest);\n    },\n\n    /**\n     * Returns a function that scores an object\n     * to show how good of a match it is to the\n     * provided query.\n     *\n     * @param {string} query\n     * @param {object} options\n     * @return {function}\n     */\n    getScoreFunction: function (query) {\n      return this.sifter.getScoreFunction(query, this.getSearchOptions());\n    },\n\n    /**\n     * Returns search options for sifter (the system\n     * for scoring and sorting results).\n     *\n     * @see https://github.com/brianreavis/sifter.js\n     * @return {object}\n     */\n    getSearchOptions: function () {\n      var settings = this.settings;\n      var sort = settings.sortField;\n      if (typeof sort === 'string') {\n        sort = [{field: sort}];\n      }\n\n      return {\n        fields: settings.searchField,\n        conjunction: settings.searchConjunction,\n        sort: sort,\n      };\n    },\n\n    /**\n     * Searches through available options and returns\n     * a sorted array of matches.\n     *\n     * Returns an object containing:\n     *\n     *   - query {string}\n     *   - tokens {array}\n     *   - total {int}\n     *   - items {array}\n     *\n     * @param {string} query\n     * @returns {object}\n     */\n    search: function (query) {\n      var i, value, score, result, calculateScore;\n      var self = this;\n      var settings = self.settings;\n      var options = this.getSearchOptions();\n\n      // validate user-provided result scoring function\n      if (settings.score) {\n        calculateScore = self.settings.score.apply(this, [query]);\n        if (typeof calculateScore !== 'function') {\n          throw new Error(\n            'Selectize \"score\" setting must be a function that returns a function'\n          );\n        }\n      }\n\n      // perform search\n      if (query !== self.lastQuery) {\n        self.lastQuery = query;\n        result = self.sifter.search(\n          query,\n          $.extend(options, {score: calculateScore})\n        );\n        self.currentResults = result;\n      } else {\n        result = $.extend(true, {}, self.currentResults);\n      }\n\n      // filter out selected items\n      if (settings.hideSelected) {\n        for (i = result.items.length - 1; i >= 0; i--) {\n          if (self.items.indexOf(hash_key(result.items[i].id)) !== -1) {\n            result.items.splice(i, 1);\n          }\n        }\n      }\n\n      return result;\n    },\n\n    /**\n     * Refreshes the list of available options shown\n     * in the autocomplete dropdown menu.\n     *\n     * @param {boolean} triggerDropdown\n     */\n    refreshOptions: function (triggerDropdown) {\n      var i,\n        j,\n        k,\n        n,\n        groups,\n        groups_order,\n        option,\n        option_html,\n        optgroup,\n        optgroups,\n        html,\n        html_children,\n        has_create_option;\n      var $active, $active_before, $create;\n\n      if (typeof triggerDropdown === 'undefined') {\n        triggerDropdown = true;\n      }\n\n      var self = this;\n      var query = $.trim(self.$control_input.val());\n      var results = self.search(query);\n      var $dropdown_content = self.$dropdown_content;\n      var active_before =\n        self.$activeOption && hash_key(self.$activeOption.attr('data-value'));\n\n      // build markup\n      n = results.items.length;\n      if (typeof self.settings.maxOptions === 'number') {\n        n = Math.min(n, self.settings.maxOptions);\n      }\n\n      // render and group available options individually\n      groups = {};\n      groups_order = [];\n\n      for (i = 0; i < n; i++) {\n        option = self.options[results.items[i].id];\n        option_html = self.render('option', option);\n        optgroup = option[self.settings.optgroupField] || '';\n        optgroups = $.isArray(optgroup) ? optgroup : [optgroup];\n\n        for (j = 0, k = optgroups && optgroups.length; j < k; j++) {\n          optgroup = optgroups[j];\n          if (!self.optgroups.hasOwnProperty(optgroup)) {\n            optgroup = '';\n          }\n          if (!groups.hasOwnProperty(optgroup)) {\n            groups[optgroup] = [];\n            groups_order.push(optgroup);\n          }\n          groups[optgroup].push(option_html);\n        }\n      }\n\n      // sort optgroups\n      if (this.settings.lockOptgroupOrder) {\n        groups_order.sort(function (a, b) {\n          var a_order = self.optgroups[a].$order || 0;\n          var b_order = self.optgroups[b].$order || 0;\n          return a_order - b_order;\n        });\n      }\n\n      // render optgroup headers & join groups\n      html = [];\n      for (i = 0, n = groups_order.length; i < n; i++) {\n        optgroup = groups_order[i];\n        if (\n          self.optgroups.hasOwnProperty(optgroup) &&\n          groups[optgroup].length\n        ) {\n          // render the optgroup header and options within it,\n          // then pass it to the wrapper template\n          html_children =\n            self.render('optgroup_header', self.optgroups[optgroup]) || '';\n          html_children += groups[optgroup].join('');\n          html.push(\n            self.render(\n              'optgroup',\n              $.extend({}, self.optgroups[optgroup], {\n                html: html_children,\n              })\n            )\n          );\n        } else {\n          html.push(groups[optgroup].join(''));\n        }\n      }\n\n      $dropdown_content.html(html.join(''));\n\n      // highlight matching terms inline\n      if (\n        self.settings.highlight &&\n        results.query.length &&\n        results.tokens.length\n      ) {\n        for (i = 0, n = results.tokens.length; i < n; i++) {\n          highlight($dropdown_content, results.tokens[i].regex);\n        }\n      }\n\n      // add \"selected\" class to selected options\n      if (!self.settings.hideSelected) {\n        for (i = 0, n = self.items.length; i < n; i++) {\n          self.getOption(self.items[i]).addClass('selected');\n        }\n      }\n\n      // add create option\n      has_create_option = self.canCreate(query);\n      if (has_create_option) {\n        $dropdown_content.prepend(self.render('option_create', {input: query}));\n        $create = $($dropdown_content[0].childNodes[0]);\n      }\n\n      // activate\n      self.hasOptions = results.items.length > 0 || has_create_option;\n      if (self.hasOptions) {\n        if (results.items.length > 0) {\n          $active_before = active_before && self.getOption(active_before);\n          if ($active_before && $active_before.length) {\n            $active = $active_before;\n          } else if (self.settings.mode === 'single' && self.items.length) {\n            $active = self.getOption(self.items[0]);\n          }\n          if (!$active || !$active.length) {\n            if ($create && !self.settings.addPrecedence) {\n              $active = self.getAdjacentOption($create, 1);\n            } else {\n              $active = $dropdown_content.find('[data-selectable]:first');\n            }\n          }\n        } else {\n          $active = $create;\n        }\n        self.setActiveOption($active);\n        if (triggerDropdown && !self.isOpen) {\n          self.open();\n        }\n      } else {\n        self.setActiveOption(null);\n        if (triggerDropdown && self.isOpen) {\n          self.close();\n        }\n      }\n    },\n\n    /**\n     * Adds an available option. If it already exists,\n     * nothing will happen. Note: this does not refresh\n     * the options list dropdown (use `refreshOptions`\n     * for that).\n     *\n     * Usage:\n     *\n     *   this.addOption(data)\n     *\n     * @param {object|array} data\n     */\n    addOption: function (data) {\n      var i,\n        n,\n        value,\n        self = this;\n\n      if ($.isArray(data)) {\n        for (i = 0, n = data.length; i < n; i++) {\n          self.addOption(data[i]);\n        }\n        return;\n      }\n\n      if ((value = self.registerOption(data))) {\n        self.userOptions[value] = true;\n        self.lastQuery = null;\n        self.trigger('option_add', value, data);\n      }\n    },\n\n    /**\n     * Registers an option to the pool of options.\n     *\n     * @param {object} data\n     * @return {boolean|string}\n     */\n    registerOption: function (data) {\n      var key = hash_key(data[this.settings.valueField]);\n      // CHANGE\n      if (\n        typeof key === 'undefined' ||\n        key === null ||\n        this.options.hasOwnProperty(key)\n      )\n        return false;\n      data.$order = data.$order || ++this.order;\n      this.options[key] = data;\n      return key;\n    },\n\n    /**\n     * Registers an option group to the pool of option groups.\n     *\n     * @param {object} data\n     * @return {boolean|string}\n     */\n    registerOptionGroup: function (data) {\n      var key = hash_key(data[this.settings.optgroupValueField]);\n      if (!key) return false;\n\n      data.$order = data.$order || ++this.order;\n      this.optgroups[key] = data;\n      return key;\n    },\n\n    /**\n     * Registers a new optgroup for options\n     * to be bucketed into.\n     *\n     * @param {string} id\n     * @param {object} data\n     */\n    addOptionGroup: function (id, data) {\n      data[this.settings.optgroupValueField] = id;\n      if ((id = this.registerOptionGroup(data))) {\n        this.trigger('optgroup_add', id, data);\n      }\n    },\n\n    /**\n     * Removes an existing option group.\n     *\n     * @param {string} id\n     */\n    removeOptionGroup: function (id) {\n      if (this.optgroups.hasOwnProperty(id)) {\n        delete this.optgroups[id];\n        this.renderCache = {};\n        this.trigger('optgroup_remove', id);\n      }\n    },\n\n    /**\n     * Clears all existing option groups.\n     */\n    clearOptionGroups: function () {\n      this.optgroups = {};\n      this.renderCache = {};\n      this.trigger('optgroup_clear');\n    },\n\n    /**\n     * Updates an option available for selection. If\n     * it is visible in the selected items or options\n     * dropdown, it will be re-rendered automatically.\n     *\n     * @param {string} value\n     * @param {object} data\n     */\n    updateOption: function (value, data) {\n      var self = this;\n      var $item, $item_new;\n      var value_new, index_item, cache_items, cache_options, order_old;\n\n      value = hash_key(value);\n      value_new = hash_key(data[self.settings.valueField]);\n\n      // sanity checks\n      if (value === null) return;\n      if (!self.options.hasOwnProperty(value)) return;\n      if (typeof value_new !== 'string')\n        throw new Error('Value must be set in option data');\n\n      order_old = self.options[value].$order;\n\n      // update references\n      if (value_new !== value) {\n        delete self.options[value];\n        index_item = self.items.indexOf(value);\n        if (index_item !== -1) {\n          self.items.splice(index_item, 1, value_new);\n        }\n      }\n      data.$order = data.$order || order_old;\n      self.options[value_new] = data;\n\n      // invalidate render cache\n      cache_items = self.renderCache['item'];\n      cache_options = self.renderCache['option'];\n\n      if (cache_items) {\n        delete cache_items[value];\n        delete cache_items[value_new];\n      }\n      if (cache_options) {\n        delete cache_options[value];\n        delete cache_options[value_new];\n      }\n\n      // update the item if it's selected\n      if (self.items.indexOf(value_new) !== -1) {\n        $item = self.getItem(value);\n        $item_new = $(self.render('item', data));\n        if ($item.hasClass('active')) $item_new.addClass('active');\n        $item.replaceWith($item_new);\n      }\n\n      // invalidate last query because we might have updated the sortField\n      self.lastQuery = null;\n\n      // update dropdown contents\n      if (self.isOpen) {\n        self.refreshOptions(false);\n      }\n    },\n\n    /**\n     * Removes a single option.\n     *\n     * @param {string} value\n     * @param {boolean} silent\n     */\n    removeOption: function (value, silent) {\n      var self = this;\n      value = hash_key(value);\n\n      var cache_items = self.renderCache['item'];\n      var cache_options = self.renderCache['option'];\n      if (cache_items) delete cache_items[value];\n      if (cache_options) delete cache_options[value];\n\n      delete self.userOptions[value];\n      delete self.options[value];\n      self.lastQuery = null;\n      self.trigger('option_remove', value);\n      self.removeItem(value, silent);\n    },\n\n    /**\n     * Clears all options.\n     */\n    clearOptions: function () {\n      var self = this;\n\n      self.loadedSearches = {};\n      self.userOptions = {};\n      self.renderCache = {};\n      self.options = self.sifter.items = {};\n      self.lastQuery = null;\n      self.trigger('option_clear');\n      self.clear();\n    },\n\n    /**\n     * Returns the jQuery element of the option\n     * matching the given value.\n     *\n     * @param {string} value\n     * @returns {object}\n     */\n    getOption: function (value) {\n      return this.getElementWithValue(\n        value,\n        this.$dropdown_content.find('[data-selectable]')\n      );\n    },\n\n    /**\n     * Returns the jQuery element of the next or\n     * previous selectable option.\n     *\n     * @param {object} $option\n     * @param {int} direction  can be 1 for next or -1 for previous\n     * @return {object}\n     */\n    getAdjacentOption: function ($option, direction) {\n      var $options = this.$dropdown.find('[data-selectable]');\n      var index = $options.index($option) + direction;\n\n      return index >= 0 && index < $options.length ? $options.eq(index) : $();\n    },\n\n    /**\n     * Finds the first element with a \"data-value\" attribute\n     * that matches the given value.\n     *\n     * @param {mixed} value\n     * @param {object} $els\n     * @return {object}\n     */\n    getElementWithValue: function (value, $els) {\n      value = hash_key(value);\n\n      if (typeof value !== 'undefined' && value !== null) {\n        for (var i = 0, n = $els.length; i < n; i++) {\n          if ($els[i].getAttribute('data-value') === value) {\n            return $($els[i]);\n          }\n        }\n      }\n\n      return $();\n    },\n\n    /**\n     * Returns the jQuery element of the item\n     * matching the given value.\n     *\n     * @param {string} value\n     * @returns {object}\n     */\n    getItem: function (value) {\n      return this.getElementWithValue(value, this.$control.children());\n    },\n\n    /**\n     * \"Selects\" multiple items at once. Adds them to the list\n     * at the current caret position.\n     *\n     * @param {string} value\n     * @param {boolean} silent\n     */\n    addItems: function (values, silent) {\n      var items = $.isArray(values) ? values : [values];\n      for (var i = 0, n = items.length; i < n; i++) {\n        this.isPending = i < n - 1;\n        this.addItem(items[i], silent);\n      }\n    },\n\n    /**\n     * \"Selects\" an item. Adds it to the list\n     * at the current caret position.\n     *\n     * @param {string} value\n     * @param {boolean} silent\n     */\n    addItem: function (value, silent) {\n      var events = silent ? [] : ['change'];\n\n      debounce_events(this, events, function () {\n        var $item, $option, $options;\n        var self = this;\n        var inputMode = self.settings.mode;\n        var i, active, value_next, wasFull;\n        value = hash_key(value);\n\n        if (self.items.indexOf(value) !== -1) {\n          if (inputMode === 'single') self.close();\n          return;\n        }\n\n        if (!self.options.hasOwnProperty(value)) return;\n        if (inputMode === 'single') self.clear(silent);\n        if (inputMode === 'multi' && self.isFull()) return;\n\n        $item = $(self.render('item', self.options[value]));\n        wasFull = self.isFull();\n        self.items.splice(self.caretPos, 0, value);\n        self.insertAtCaret($item);\n        if (!self.isPending || (!wasFull && self.isFull())) {\n          self.refreshState();\n        }\n\n        if (self.isSetup) {\n          $options = self.$dropdown_content.find('[data-selectable]');\n\n          // update menu / remove the option (if this is not one item being added as part of series)\n          if (!self.isPending) {\n            $option = self.getOption(value);\n            value_next = self.getAdjacentOption($option, 1).attr('data-value');\n            self.refreshOptions(self.isFocused && inputMode !== 'single');\n            if (value_next) {\n              self.setActiveOption(self.getOption(value_next));\n            }\n          }\n\n          // hide the menu if the maximum number of items have been selected or no options are left\n          if (!$options.length || self.isFull()) {\n            self.close();\n          } else {\n            self.positionDropdown();\n          }\n\n          self.updatePlaceholder();\n          self.trigger('item_add', value, $item);\n          self.updateOriginalInput({silent: silent});\n        }\n      });\n    },\n\n    /**\n     * Removes the selected item matching\n     * the provided value.\n     *\n     * @param {string} value\n     */\n    removeItem: function (value, silent) {\n      var self = this;\n      var $item, i, idx;\n\n      $item = typeof value === 'object' ? value : self.getItem(value);\n      value = hash_key($item.attr('data-value'));\n      i = self.items.indexOf(value);\n\n      if (i !== -1) {\n        $item.remove();\n        if ($item.hasClass('active')) {\n          idx = self.$activeItems.indexOf($item[0]);\n          self.$activeItems.splice(idx, 1);\n        }\n\n        self.items.splice(i, 1);\n        self.lastQuery = null;\n        if (!self.settings.persist && self.userOptions.hasOwnProperty(value)) {\n          self.removeOption(value, silent);\n        }\n\n        if (i < self.caretPos) {\n          self.setCaret(self.caretPos - 1);\n        }\n\n        self.refreshState();\n        self.updatePlaceholder();\n        self.updateOriginalInput({silent: silent});\n        self.positionDropdown();\n        self.trigger('item_remove', value, $item);\n      }\n    },\n\n    /**\n     * Invokes the `create` method provided in the\n     * selectize options that should provide the data\n     * for the new item, given the user input.\n     *\n     * Once this completes, it will be added\n     * to the item list.\n     *\n     * @param {string} value\n     * @param {boolean} [triggerDropdown]\n     * @param {function} [callback]\n     * @return {boolean}\n     */\n    createItem: function (input, triggerDropdown) {\n      var self = this;\n      var caret = self.caretPos;\n      input = input || $.trim(self.$control_input.val() || '');\n\n      var callback = arguments[arguments.length - 1];\n      if (typeof callback !== 'function') callback = function () {};\n\n      if (typeof triggerDropdown !== 'boolean') {\n        triggerDropdown = true;\n      }\n\n      if (!self.canCreate(input)) {\n        callback();\n        return false;\n      }\n\n      self.lock();\n\n      var setup =\n        typeof self.settings.create === 'function'\n          ? this.settings.create\n          : function (input) {\n              var data = {};\n              data[self.settings.labelField] = input;\n              data[self.settings.valueField] = input;\n              return data;\n            };\n\n      var create = once(function (data) {\n        self.unlock();\n\n        if (!data || typeof data !== 'object') return callback();\n        var value = hash_key(data[self.settings.valueField]);\n        if (typeof value !== 'string') return callback();\n\n        self.setTextboxValue('');\n        self.addOption(data);\n        self.setCaret(caret);\n        self.addItem(value);\n        self.refreshOptions(triggerDropdown && self.settings.mode !== 'single');\n        callback(data);\n      });\n\n      var output = setup.apply(this, [input, create]);\n      if (typeof output !== 'undefined') {\n        create(output);\n      }\n\n      return true;\n    },\n\n    /**\n     * Re-renders the selected item lists.\n     */\n    refreshItems: function () {\n      this.lastQuery = null;\n\n      if (this.isSetup) {\n        this.addItem(this.items);\n      }\n\n      this.refreshState();\n      this.updateOriginalInput();\n    },\n\n    /**\n     * Updates all state-dependent attributes\n     * and CSS classes.\n     */\n    refreshState: function () {\n      var invalid,\n        self = this;\n      if (self.isRequired) {\n        if (self.items.length) self.isInvalid = false;\n        self.$control_input.prop('required', invalid);\n      }\n      self.refreshClasses();\n    },\n\n    /**\n     * Updates all state-dependent CSS classes.\n     */\n    refreshClasses: function () {\n      var self = this;\n      var isFull = self.isFull();\n      var isLocked = self.isLocked;\n\n      self.$wrapper.toggleClass('rtl', self.rtl);\n\n      self.$control\n        .toggleClass('focus', self.isFocused)\n        .toggleClass('disabled', self.isDisabled)\n        .toggleClass('required', self.isRequired)\n        .toggleClass('invalid', self.isInvalid)\n        .toggleClass('locked', isLocked)\n        .toggleClass('full', isFull)\n        .toggleClass('not-full', !isFull)\n        .toggleClass('input-active', self.isFocused && !self.isInputHidden)\n        .toggleClass('dropdown-active', self.isOpen)\n        .toggleClass('has-options', !$.isEmptyObject(self.options))\n        .toggleClass('has-items', self.items.length > 0);\n\n      self.$control_input.data('grow', !isFull && !isLocked);\n    },\n\n    /**\n     * Determines whether or not more items can be added\n     * to the control without exceeding the user-defined maximum.\n     *\n     * @returns {boolean}\n     */\n    isFull: function () {\n      return (\n        this.settings.maxItems !== null &&\n        this.items.length >= this.settings.maxItems\n      );\n    },\n\n    /**\n     * Refreshes the original <select> or <input>\n     * element to reflect the current state.\n     */\n    updateOriginalInput: function (opts) {\n      var i,\n        n,\n        options,\n        label,\n        self = this;\n      opts = opts || {};\n\n      if (self.tagType === TAG_SELECT) {\n        options = [];\n        for (i = 0, n = self.items.length; i < n; i++) {\n          label = self.options[self.items[i]][self.settings.labelField] || '';\n          options.push(\n            '<option value=\"' +\n              escape_html(self.items[i]) +\n              '\" selected=\"selected\">' +\n              escape_html(label) +\n              '</option>'\n          );\n        }\n        if (!options.length && !this.$input.attr('multiple')) {\n          options.push('<option value=\"\" selected=\"selected\"></option>');\n        }\n        self.$input.html(options.join(''));\n      } else {\n        self.$input.val(self.getValue());\n        self.$input.attr('value', self.$input.val());\n      }\n\n      if (self.isSetup) {\n        if (!opts.silent) {\n          self.trigger('change', self.$input.val());\n        }\n      }\n    },\n\n    /**\n     * Shows/hide the input placeholder depending\n     * on if there items in the list already.\n     */\n    updatePlaceholder: function () {\n      if (!this.settings.placeholder) return;\n      var $input = this.$control_input;\n\n      if (this.items.length) {\n        $input.removeAttr('placeholder');\n      } else {\n        $input.attr('placeholder', this.settings.placeholder);\n      }\n      $input.triggerHandler('update', {force: true});\n    },\n\n    /**\n     * Shows the autocomplete dropdown containing\n     * the available options.\n     */\n    open: function () {\n      var self = this;\n\n      if (\n        self.isLocked ||\n        self.isOpen ||\n        (self.settings.mode === 'multi' && self.isFull())\n      )\n        return;\n      self.focus();\n      self.isOpen = true;\n      self.refreshState();\n      self.$dropdown.css({visibility: 'hidden', display: 'block'});\n      self.positionDropdown();\n      self.$dropdown.css({visibility: 'visible'});\n      self.trigger('dropdown_open', self.$dropdown);\n    },\n\n    /**\n     * Closes the autocomplete dropdown menu.\n     */\n    close: function () {\n      var self = this;\n      var trigger = self.isOpen;\n\n      if (self.settings.mode === 'single' && self.items.length) {\n        self.hideInput();\n      }\n\n      self.isOpen = false;\n      self.$dropdown.hide();\n      self.setActiveOption(null);\n      self.refreshState();\n\n      if (trigger) self.trigger('dropdown_close', self.$dropdown);\n    },\n\n    /**\n     * Calculates and applies the appropriate\n     * position of the dropdown.\n     */\n    positionDropdown: function () {\n      var $control = this.$control;\n      var offset =\n        this.settings.dropdownParent === 'body'\n          ? $control.offset()\n          : $control.position();\n      offset.top += $control.outerHeight(true);\n\n      this.$dropdown.css({\n        width: $control.outerWidth(),\n        top: offset.top,\n        left: offset.left,\n      });\n    },\n\n    /**\n     * Resets / clears all selected items\n     * from the control.\n     *\n     * @param {boolean} silent\n     */\n    clear: function (silent) {\n      var self = this;\n\n      if (!self.items.length) return;\n      self.$control.children(':not(input)').remove();\n      self.items = [];\n      self.lastQuery = null;\n      self.setCaret(0);\n      self.setActiveItem(null);\n      self.updatePlaceholder();\n      self.updateOriginalInput({silent: silent});\n      self.refreshState();\n      self.showInput();\n      self.trigger('clear');\n    },\n\n    /**\n     * A helper method for inserting an element\n     * at the current caret position.\n     *\n     * @param {object} $el\n     */\n    insertAtCaret: function ($el) {\n      var caret = Math.min(this.caretPos, this.items.length);\n      if (caret === 0) {\n        this.$control.prepend($el);\n      } else {\n        $(this.$control[0].childNodes[caret]).before($el);\n      }\n      this.setCaret(caret + 1);\n    },\n\n    /**\n     * Removes the current selected item(s).\n     *\n     * @param {object} e (optional)\n     * @returns {boolean}\n     */\n    deleteSelection: function (e) {\n      var i,\n        n,\n        direction,\n        selection,\n        values,\n        caret,\n        option_select,\n        $option_select,\n        $tail;\n      var self = this;\n\n      direction = e && e.keyCode === KEY_BACKSPACE ? -1 : 1;\n      selection = getSelection(self.$control_input[0]);\n\n      if (self.$activeOption && !self.settings.hideSelected) {\n        option_select = self\n          .getAdjacentOption(self.$activeOption, -1)\n          .attr('data-value');\n      }\n\n      // determine items that will be removed\n      values = [];\n\n      if (self.$activeItems.length) {\n        $tail = self.$control.children(\n          '.active:' + (direction > 0 ? 'last' : 'first')\n        );\n        caret = self.$control.children(':not(input)').index($tail);\n        if (direction > 0) {\n          caret++;\n        }\n\n        for (i = 0, n = self.$activeItems.length; i < n; i++) {\n          values.push($(self.$activeItems[i]).attr('data-value'));\n        }\n        if (e) {\n          e.preventDefault();\n          e.stopPropagation();\n        }\n      } else if (\n        (self.isFocused || self.settings.mode === 'single') &&\n        self.items.length\n      ) {\n        if (direction < 0 && selection.start === 0 && selection.length === 0) {\n          values.push(self.items[self.caretPos - 1]);\n        } else if (\n          direction > 0 &&\n          selection.start === self.$control_input.val().length\n        ) {\n          values.push(self.items[self.caretPos]);\n        }\n      }\n\n      // allow the callback to abort\n      if (\n        !values.length ||\n        (typeof self.settings.onDelete === 'function' &&\n          self.settings.onDelete.apply(self, [values]) === false)\n      ) {\n        return false;\n      }\n\n      // perform removal\n      if (typeof caret !== 'undefined') {\n        self.setCaret(caret);\n      }\n      while (values.length) {\n        self.removeItem(values.pop());\n      }\n\n      self.showInput();\n      self.positionDropdown();\n      self.refreshOptions(true);\n\n      // select previous option\n      if (option_select) {\n        $option_select = self.getOption(option_select);\n        if ($option_select.length) {\n          self.setActiveOption($option_select);\n        }\n      }\n\n      return true;\n    },\n\n    /**\n     * Selects the previous / next item (depending\n     * on the `direction` argument).\n     *\n     * > 0 - right\n     * < 0 - left\n     *\n     * @param {int} direction\n     * @param {object} e (optional)\n     */\n    advanceSelection: function (direction, e) {\n      var tail, selection, idx, valueLength, cursorAtEdge, $tail;\n      var self = this;\n\n      if (direction === 0) return;\n      if (self.rtl) direction *= -1;\n\n      tail = direction > 0 ? 'last' : 'first';\n      selection = getSelection(self.$control_input[0]);\n\n      if (self.isFocused && !self.isInputHidden) {\n        valueLength = self.$control_input.val().length;\n        cursorAtEdge =\n          direction < 0\n            ? selection.start === 0 && selection.length === 0\n            : selection.start === valueLength;\n\n        if (cursorAtEdge && !valueLength) {\n          self.advanceCaret(direction, e);\n        }\n      } else {\n        $tail = self.$control.children('.active:' + tail);\n        if ($tail.length) {\n          idx = self.$control.children(':not(input)').index($tail);\n          self.setActiveItem(null);\n          self.setCaret(direction > 0 ? idx + 1 : idx);\n        }\n      }\n    },\n\n    /**\n     * Moves the caret left / right.\n     *\n     * @param {int} direction\n     * @param {object} e (optional)\n     */\n    advanceCaret: function (direction, e) {\n      var self = this,\n        fn,\n        $adj;\n\n      if (direction === 0) return;\n\n      fn = direction > 0 ? 'next' : 'prev';\n      if (self.isShiftDown) {\n        $adj = self.$control_input[fn]();\n        if ($adj.length) {\n          self.hideInput();\n          self.setActiveItem($adj);\n          e && e.preventDefault();\n        }\n      } else {\n        self.setCaret(self.caretPos + direction);\n      }\n    },\n\n    /**\n     * Moves the caret to the specified index.\n     *\n     * @param {int} i\n     */\n    setCaret: function (i) {\n      var self = this;\n\n      if (self.settings.mode === 'single') {\n        i = self.items.length;\n      } else {\n        i = Math.max(0, Math.min(self.items.length, i));\n      }\n\n      if (!self.isPending) {\n        // the input must be moved by leaving it in place and moving the\n        // siblings, due to the fact that focus cannot be restored once lost\n        // on mobile webkit devices\n        var j, n, fn, $children, $child;\n        $children = self.$control.children(':not(input)');\n        for (j = 0, n = $children.length; j < n; j++) {\n          $child = $($children[j]).detach();\n          if (j < i) {\n            self.$control_input.before($child);\n          } else {\n            self.$control.append($child);\n          }\n        }\n      }\n\n      self.caretPos = i;\n    },\n\n    /**\n     * Disables user input on the control. Used while\n     * items are being asynchronously created.\n     */\n    lock: function () {\n      this.close();\n      this.isLocked = true;\n      this.refreshState();\n    },\n\n    /**\n     * Re-enables user input on the control.\n     */\n    unlock: function () {\n      this.isLocked = false;\n      this.refreshState();\n    },\n\n    /**\n     * Disables user input on the control completely.\n     * While disabled, it cannot receive focus.\n     */\n    disable: function () {\n      var self = this;\n      self.$input.prop('disabled', true);\n      self.$control_input.prop('disabled', true).prop('tabindex', -1);\n      self.isDisabled = true;\n      self.lock();\n    },\n\n    /**\n     * Enables the control so that it can respond\n     * to focus and user input.\n     */\n    enable: function () {\n      var self = this;\n      self.$input.prop('disabled', false);\n      self.$control_input\n        .prop('disabled', false)\n        .prop('tabindex', self.tabIndex);\n      self.isDisabled = false;\n      self.unlock();\n    },\n\n    /**\n     * Completely destroys the control and\n     * unbinds all event listeners so that it can\n     * be garbage collected.\n     */\n    destroy: function () {\n      var self = this;\n      var eventNS = self.eventNS;\n      var revertSettings = self.revertSettings;\n\n      self.trigger('destroy');\n      self.off();\n      self.$wrapper.remove();\n      self.$dropdown.remove();\n\n      self.$input\n        .html('')\n        .append(revertSettings.$children)\n        .removeAttr('tabindex')\n        .removeClass('selectized')\n        .attr({tabindex: revertSettings.tabindex})\n        .show();\n\n      self.$control_input.removeData('grow');\n      self.$input.removeData('selectize');\n\n      $(window).off(eventNS);\n      $(document).off(eventNS);\n      $(document.body).off(eventNS);\n\n      delete self.$input[0].selectize;\n    },\n\n    /**\n     * A helper method for rendering \"item\" and\n     * \"option\" templates, given the data.\n     *\n     * @param {string} templateName\n     * @param {object} data\n     * @returns {string}\n     */\n    render: function (templateName, data) {\n      var value, id, label;\n      var html = '';\n      var cache = false;\n      var self = this;\n      var regex_tag =\n        /^[\\t \\r\\n]*<([a-z][a-z0-9\\-_]*(?:\\:[a-z][a-z0-9\\-_]*)?)/i;\n\n      if (templateName === 'option' || templateName === 'item') {\n        value = hash_key(data[self.settings.valueField]);\n        cache = !!value;\n      }\n\n      // pull markup from cache if it exists\n      if (cache) {\n        if (!isset(self.renderCache[templateName])) {\n          self.renderCache[templateName] = {};\n        }\n        if (self.renderCache[templateName].hasOwnProperty(value)) {\n          return self.renderCache[templateName][value];\n        }\n      }\n\n      // render markup\n      html = self.settings.render[templateName].apply(this, [\n        data,\n        escape_html,\n      ]);\n\n      // add mandatory attributes\n      if (templateName === 'option' || templateName === 'option_create') {\n        html = html.replace(regex_tag, '<$1 data-selectable');\n      }\n      if (templateName === 'optgroup') {\n        id = data[self.settings.optgroupValueField] || '';\n        html = html.replace(\n          regex_tag,\n          '<$1 data-group=\"' + escape_replace(escape_html(id)) + '\"'\n        );\n      }\n      if (templateName === 'option' || templateName === 'item') {\n        html = html.replace(\n          regex_tag,\n          '<$1 data-value=\"' + escape_replace(escape_html(value || '')) + '\"'\n        );\n      }\n\n      // update cache\n      if (cache) {\n        self.renderCache[templateName][value] = html;\n      }\n\n      return html;\n    },\n\n    /**\n     * Clears the render cache for a template. If\n     * no template is given, clears all render\n     * caches.\n     *\n     * @param {string} templateName\n     */\n    clearCache: function (templateName) {\n      var self = this;\n      if (typeof templateName === 'undefined') {\n        self.renderCache = {};\n      } else {\n        delete self.renderCache[templateName];\n      }\n    },\n\n    /**\n     * Determines whether or not to display the\n     * create item prompt, given a user input.\n     *\n     * @param {string} input\n     * @return {boolean}\n     */\n    canCreate: function (input) {\n      var self = this;\n      if (!self.settings.create) return false;\n      var filter = self.settings.createFilter;\n      return (\n        input.length &&\n        (typeof filter !== 'function' || filter.apply(self, [input])) &&\n        (typeof filter !== 'string' || new RegExp(filter).test(input)) &&\n        (!(filter instanceof RegExp) || filter.test(input))\n      );\n    },\n  });\n\n  Selectize.count = 0;\n  Selectize.defaults = {\n    options: [],\n    optgroups: [],\n\n    plugins: [],\n    delimiter: ',',\n    splitOn: null, // regexp or string for splitting up values from a paste command\n    persist: true,\n    diacritics: true,\n    create: false,\n    createOnBlur: false,\n    createFilter: null,\n    highlight: true,\n    openOnFocus: true,\n    maxOptions: 1000,\n    maxItems: null,\n    hideSelected: null,\n    addPrecedence: false,\n    selectOnTab: false,\n    preload: false,\n    allowEmptyOption: false,\n    closeAfterSelect: false,\n\n    scrollDuration: 60,\n    loadThrottle: 300,\n    loadingClass: 'loading',\n\n    dataAttr: 'data-data',\n    optgroupField: 'optgroup',\n    valueField: 'value',\n    labelField: 'text',\n    optgroupLabelField: 'label',\n    optgroupValueField: 'value',\n    lockOptgroupOrder: false,\n\n    sortField: '$order',\n    searchField: ['text'],\n    searchConjunction: 'and',\n\n    mode: null,\n    wrapperClass: 'selectize-control',\n    inputClass: 'selectize-input',\n    dropdownClass: 'selectize-dropdown',\n    dropdownContentClass: 'selectize-dropdown-content',\n\n    dropdownParent: null,\n\n    copyClassesToDropdown: true,\n\n    /*\n        load                 : null, // function(query, callback) { ... }\n        score                : null, // function(search) { ... }\n        onInitialize         : null, // function() { ... }\n        onChange             : null, // function(value) { ... }\n        onItemAdd            : null, // function(value, $item) { ... }\n        onItemRemove         : null, // function(value) { ... }\n        onClear              : null, // function() { ... }\n        onOptionAdd          : null, // function(value, data) { ... }\n        onOptionRemove       : null, // function(value) { ... }\n        onOptionClear        : null, // function() { ... }\n        onOptionGroupAdd     : null, // function(id, data) { ... }\n        onOptionGroupRemove  : null, // function(id) { ... }\n        onOptionGroupClear   : null, // function() { ... }\n        onDropdownOpen       : null, // function($dropdown) { ... }\n        onDropdownClose      : null, // function($dropdown) { ... }\n        onType               : null, // function(str) { ... }\n        onDelete             : null, // function(values) { ... }\n        */\n\n    render: {\n      /*\n            item: null,\n            optgroup: null,\n            optgroup_header: null,\n            option: null,\n            option_create: null\n            */\n    },\n  };\n\n  $.fn.selectize = function (settings_user) {\n    var defaults = $.fn.selectize.defaults;\n    var settings = $.extend({}, defaults, settings_user);\n    var attr_data = settings.dataAttr;\n    var field_label = settings.labelField;\n    var field_value = settings.valueField;\n    var field_optgroup = settings.optgroupField;\n    var field_optgroup_label = settings.optgroupLabelField;\n    var field_optgroup_value = settings.optgroupValueField;\n\n    /**\n     * Initializes selectize from a <input type=\"text\"> element.\n     *\n     * @param {object} $input\n     * @param {object} settings_element\n     */\n    var init_textbox = function ($input, settings_element) {\n      var i, n, values, option;\n\n      var data_raw = $input.attr(attr_data);\n\n      if (!data_raw) {\n        var value = $.trim($input.val() || '');\n        if (!settings.allowEmptyOption && !value.length) return;\n        values = value.split(settings.delimiter);\n        for (i = 0, n = values.length; i < n; i++) {\n          option = {};\n          option[field_label] = values[i];\n          option[field_value] = values[i];\n          settings_element.options.push(option);\n        }\n        settings_element.items = values;\n      } else {\n        settings_element.options = JSON.parse(data_raw);\n        for (i = 0, n = settings_element.options.length; i < n; i++) {\n          settings_element.items.push(settings_element.options[i][field_value]);\n        }\n      }\n    };\n\n    /**\n     * Initializes selectize from a <select> element.\n     *\n     * @param {object} $input\n     * @param {object} settings_element\n     */\n    var init_select = function ($input, settings_element) {\n      var i,\n        n,\n        tagName,\n        $children,\n        order = 0;\n      var options = settings_element.options;\n      var optionsMap = {};\n\n      var readData = function ($el) {\n        var data = attr_data && $el.attr(attr_data);\n        if (typeof data === 'string' && data.length) {\n          return JSON.parse(data);\n        }\n        return null;\n      };\n\n      var addOption = function ($option, group) {\n        $option = $($option);\n\n        var value = hash_key($option.attr('value'));\n        if (!value && !settings.allowEmptyOption) return;\n\n        // if the option already exists, it's probably been\n        // duplicated in another optgroup. in this case, push\n        // the current group to the \"optgroup\" property on the\n        // existing option so that it's rendered in both places.\n        if (optionsMap.hasOwnProperty(value)) {\n          if (group) {\n            var arr = optionsMap[value][field_optgroup];\n            if (!arr) {\n              optionsMap[value][field_optgroup] = group;\n            } else if (!$.isArray(arr)) {\n              optionsMap[value][field_optgroup] = [arr, group];\n            } else {\n              arr.push(group);\n            }\n          }\n          return;\n        }\n\n        var option = readData($option) || {};\n        option[field_label] = option[field_label] || $option.text();\n        option[field_value] = option[field_value] || value;\n        option[field_optgroup] = option[field_optgroup] || group;\n\n        optionsMap[value] = option;\n        options.push(option);\n\n        if ($option.is(':selected')) {\n          settings_element.items.push(value);\n        }\n      };\n\n      var addGroup = function ($optgroup) {\n        var i, n, id, optgroup, $options;\n\n        $optgroup = $($optgroup);\n        id = $optgroup.attr('label');\n\n        if (id) {\n          optgroup = readData($optgroup) || {};\n          optgroup[field_optgroup_label] = id;\n          optgroup[field_optgroup_value] = id;\n          settings_element.optgroups.push(optgroup);\n        }\n\n        $options = $('option', $optgroup);\n        for (i = 0, n = $options.length; i < n; i++) {\n          addOption($options[i], id);\n        }\n      };\n\n      settings_element.maxItems = $input.attr('multiple') ? null : 1;\n\n      $children = $input.children();\n      for (i = 0, n = $children.length; i < n; i++) {\n        tagName = $children[i].tagName.toLowerCase();\n        if (tagName === 'optgroup') {\n          addGroup($children[i]);\n        } else if (tagName === 'option') {\n          addOption($children[i]);\n        }\n      }\n    };\n\n    return this.each(function () {\n      if (this.selectize) return;\n\n      var instance;\n      var $input = $(this);\n      var tag_name = this.tagName.toLowerCase();\n      var placeholder =\n        $input.attr('placeholder') || $input.attr('data-placeholder');\n      if (!placeholder && !settings.allowEmptyOption) {\n        placeholder = $input.children('option[value=\"\"]').text();\n      }\n\n      var settings_element = {\n        placeholder: placeholder,\n        options: [],\n        optgroups: [],\n        items: [],\n      };\n\n      if (tag_name === 'select') {\n        init_select($input, settings_element);\n      } else {\n        init_textbox($input, settings_element);\n      }\n\n      instance = new Selectize(\n        $input,\n        $.extend(true, {}, defaults, settings_element, settings_user)\n      );\n    });\n  };\n\n  $.fn.selectize.defaults = Selectize.defaults;\n  $.fn.selectize.support = {\n    validity: SUPPORTS_VALIDITY_API,\n  };\n\n  Selectize.define('drag_drop', function (options) {\n    if (!$.fn.sortable)\n      throw new Error('The \"drag_drop\" plugin requires jQuery UI \"sortable\".');\n    if (this.settings.mode !== 'multi') return;\n    var self = this;\n\n    self.lock = (function () {\n      var original = self.lock;\n      return function () {\n        var sortable = self.$control.data('sortable');\n        if (sortable) sortable.disable();\n        return original.apply(self, arguments);\n      };\n    })();\n\n    self.unlock = (function () {\n      var original = self.unlock;\n      return function () {\n        var sortable = self.$control.data('sortable');\n        if (sortable) sortable.enable();\n        return original.apply(self, arguments);\n      };\n    })();\n\n    self.setup = (function () {\n      var original = self.setup;\n      return function () {\n        original.apply(this, arguments);\n\n        var $control = self.$control.sortable({\n          items: '[data-value]',\n          forcePlaceholderSize: true,\n          disabled: self.isLocked,\n          start: function (e, ui) {\n            ui.placeholder.css('width', ui.helper.css('width'));\n            $control.css({overflow: 'visible'});\n          },\n          stop: function () {\n            $control.css({overflow: 'hidden'});\n            var active = self.$activeItems ? self.$activeItems.slice() : null;\n            var values = [];\n            $control.children('[data-value]').each(function () {\n              values.push($(this).attr('data-value'));\n            });\n            self.setValue(values);\n            self.setActiveItem(active);\n          },\n        });\n      };\n    })();\n  });\n\n  Selectize.define('dropdown_header', function (options) {\n    var self = this;\n\n    options = $.extend(\n      {\n        title: 'Untitled',\n        headerClass: 'selectize-dropdown-header',\n        titleRowClass: 'selectize-dropdown-header-title',\n        labelClass: 'selectize-dropdown-header-label',\n        closeClass: 'selectize-dropdown-header-close',\n\n        html: function (data) {\n          return (\n            '<div class=\"' +\n            data.headerClass +\n            '\">' +\n            '<div class=\"' +\n            data.titleRowClass +\n            '\">' +\n            '<span class=\"' +\n            data.labelClass +\n            '\">' +\n            data.title +\n            '</span>' +\n            '<a href=\"javascript:void(0)\" class=\"' +\n            data.closeClass +\n            '\">&times;</a>' +\n            '</div>' +\n            '</div>'\n          );\n        },\n      },\n      options\n    );\n\n    self.setup = (function () {\n      var original = self.setup;\n      return function () {\n        original.apply(self, arguments);\n        self.$dropdown_header = $(options.html(options));\n        self.$dropdown.prepend(self.$dropdown_header);\n      };\n    })();\n  });\n\n  Selectize.define('optgroup_columns', function (options) {\n    var self = this;\n\n    options = $.extend(\n      {\n        equalizeWidth: true,\n        equalizeHeight: true,\n      },\n      options\n    );\n\n    this.getAdjacentOption = function ($option, direction) {\n      var $options = $option.closest('[data-group]').find('[data-selectable]');\n      var index = $options.index($option) + direction;\n\n      return index >= 0 && index < $options.length ? $options.eq(index) : $();\n    };\n\n    this.onKeyDown = (function () {\n      var original = self.onKeyDown;\n      return function (e) {\n        var index, $option, $options, $optgroup;\n\n        if (\n          this.isOpen &&\n          (e.keyCode === KEY_LEFT || e.keyCode === KEY_RIGHT)\n        ) {\n          self.ignoreHover = true;\n          $optgroup = this.$activeOption.closest('[data-group]');\n          index = $optgroup.find('[data-selectable]').index(this.$activeOption);\n\n          if (e.keyCode === KEY_LEFT) {\n            $optgroup = $optgroup.prev('[data-group]');\n          } else {\n            $optgroup = $optgroup.next('[data-group]');\n          }\n\n          $options = $optgroup.find('[data-selectable]');\n          $option = $options.eq(Math.min($options.length - 1, index));\n          if ($option.length) {\n            this.setActiveOption($option);\n          }\n          return;\n        }\n\n        return original.apply(this, arguments);\n      };\n    })();\n\n    var getScrollbarWidth = function () {\n      var div;\n      var width = getScrollbarWidth.width;\n      var doc = document;\n\n      if (typeof width === 'undefined') {\n        div = doc.createElement('div');\n        div.innerHTML =\n          '<div style=\"width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;\"><div style=\"width:1px;height:100px;\"></div></div>';\n        div = div.firstChild;\n        doc.body.appendChild(div);\n        width = getScrollbarWidth.width = div.offsetWidth - div.clientWidth;\n        doc.body.removeChild(div);\n      }\n      return width;\n    };\n\n    var equalizeSizes = function () {\n      var i, n, height_max, width, width_last, width_parent, $optgroups;\n\n      $optgroups = $('[data-group]', self.$dropdown_content);\n      n = $optgroups.length;\n      if (!n || !self.$dropdown_content.width()) return;\n\n      if (options.equalizeHeight) {\n        height_max = 0;\n        for (i = 0; i < n; i++) {\n          height_max = Math.max(height_max, $optgroups.eq(i).height());\n        }\n        $optgroups.css({height: height_max});\n      }\n\n      if (options.equalizeWidth) {\n        width_parent =\n          self.$dropdown_content.innerWidth() - getScrollbarWidth();\n        width = Math.round(width_parent / n);\n        $optgroups.css({width: width});\n        if (n > 1) {\n          width_last = width_parent - width * (n - 1);\n          $optgroups.eq(n - 1).css({width: width_last});\n        }\n      }\n    };\n\n    if (options.equalizeHeight || options.equalizeWidth) {\n      hook.after(this, 'positionDropdown', equalizeSizes);\n      hook.after(this, 'refreshOptions', equalizeSizes);\n    }\n  });\n\n  Selectize.define('remove_button', function (options) {\n    if (this.settings.mode === 'single') return;\n\n    options = $.extend(\n      {\n        label: '&times;',\n        title: 'Remove',\n        className: 'remove',\n        append: true,\n      },\n      options\n    );\n\n    var self = this;\n    var html =\n      '<a href=\"javascript:void(0)\" class=\"' +\n      options.className +\n      '\" tabindex=\"-1\" title=\"' +\n      escape_html(options.title) +\n      '\">' +\n      options.label +\n      '</a>';\n\n    /**\n     * Appends an element as a child (with raw HTML).\n     *\n     * @param {string} html_container\n     * @param {string} html_element\n     * @return {string}\n     */\n    var append = function (html_container, html_element) {\n      var pos = html_container.search(/(<\\/[^>]+>\\s*)$/);\n      return (\n        html_container.substring(0, pos) +\n        html_element +\n        html_container.substring(pos)\n      );\n    };\n\n    this.setup = (function () {\n      var original = self.setup;\n      return function () {\n        // override the item rendering method to add the button to each\n        if (options.append) {\n          var render_item = self.settings.render.item;\n          self.settings.render.item = function (data) {\n            return append(render_item.apply(this, arguments), html);\n          };\n        }\n\n        original.apply(this, arguments);\n\n        // add event listener\n        this.$control.on('click', '.' + options.className, function (e) {\n          e.preventDefault();\n          if (self.isLocked) return;\n\n          var $item = $(e.currentTarget).parent();\n          self.setActiveItem($item);\n          if (self.deleteSelection()) {\n            self.setCaret(self.items.length);\n          }\n        });\n      };\n    })();\n  });\n\n  Selectize.define('restore_on_backspace', function (options) {\n    var self = this;\n\n    options.text =\n      options.text ||\n      function (option) {\n        return option[this.settings.labelField];\n      };\n\n    this.onKeyDown = (function () {\n      var original = self.onKeyDown;\n      return function (e) {\n        var index, option;\n        if (\n          e.keyCode === KEY_BACKSPACE &&\n          this.$control_input.val() === '' &&\n          !this.$activeItems.length\n        ) {\n          index = this.caretPos - 1;\n          if (index >= 0 && index < this.items.length) {\n            option = this.options[this.items[index]];\n            if (this.deleteSelection(e)) {\n              this.setTextboxValue(options.text.apply(this, [option]));\n              this.refreshOptions(true);\n            }\n            e.preventDefault();\n            return;\n          }\n        }\n        return original.apply(this, arguments);\n      };\n    })();\n  });\n\n  return Selectize;\n});\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ruleSet[1].rules[3].use[1]!../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[3].use[3]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[3].use[4]!./feed-me.scss\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"5431c7e0\", content, true, {});","/**\n * Translates the list format produced by css-loader into something\n * easier to manipulate.\n */\nexport default function listToStyles (parentId, list) {\n  var styles = []\n  var newStyles = {}\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i]\n    var id = item[0]\n    var css = item[1]\n    var media = item[2]\n    var sourceMap = item[3]\n    var part = {\n      id: parentId + ':' + i,\n      css: css,\n      media: media,\n      sourceMap: sourceMap\n    }\n    if (!newStyles[id]) {\n      styles.push(newStyles[id] = { id: id, parts: [part] })\n    } else {\n      newStyles[id].parts.push(part)\n    }\n  }\n  return styles\n}\n","/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n  Modified by Evan You @yyx990803\n*/\n\nimport listToStyles from './listToStyles'\n\nvar hasDocument = typeof document !== 'undefined'\n\nif (typeof DEBUG !== 'undefined' && DEBUG) {\n  if (!hasDocument) {\n    throw new Error(\n    'vue-style-loader cannot be used in a non-browser environment. ' +\n    \"Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.\"\n  ) }\n}\n\n/*\ntype StyleObject = {\n  id: number;\n  parts: Array<StyleObjectPart>\n}\n\ntype StyleObjectPart = {\n  css: string;\n  media: string;\n  sourceMap: ?string\n}\n*/\n\nvar stylesInDom = {/*\n  [id: number]: {\n    id: number,\n    refs: number,\n    parts: Array<(obj?: StyleObjectPart) => void>\n  }\n*/}\n\nvar head = hasDocument && (document.head || document.getElementsByTagName('head')[0])\nvar singletonElement = null\nvar singletonCounter = 0\nvar isProduction = false\nvar noop = function () {}\nvar options = null\nvar ssrIdKey = 'data-vue-ssr-id'\n\n// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n// tags it will allow on a page\nvar isOldIE = typeof navigator !== 'undefined' && /msie [6-9]\\b/.test(navigator.userAgent.toLowerCase())\n\nexport default function addStylesClient (parentId, list, _isProduction, _options) {\n  isProduction = _isProduction\n\n  options = _options || {}\n\n  var styles = listToStyles(parentId, list)\n  addStylesToDom(styles)\n\n  return function update (newList) {\n    var mayRemove = []\n    for (var i = 0; i < styles.length; i++) {\n      var item = styles[i]\n      var domStyle = stylesInDom[item.id]\n      domStyle.refs--\n      mayRemove.push(domStyle)\n    }\n    if (newList) {\n      styles = listToStyles(parentId, newList)\n      addStylesToDom(styles)\n    } else {\n      styles = []\n    }\n    for (var i = 0; i < mayRemove.length; i++) {\n      var domStyle = mayRemove[i]\n      if (domStyle.refs === 0) {\n        for (var j = 0; j < domStyle.parts.length; j++) {\n          domStyle.parts[j]()\n        }\n        delete stylesInDom[domStyle.id]\n      }\n    }\n  }\n}\n\nfunction addStylesToDom (styles /* Array<StyleObject> */) {\n  for (var i = 0; i < styles.length; i++) {\n    var item = styles[i]\n    var domStyle = stylesInDom[item.id]\n    if (domStyle) {\n      domStyle.refs++\n      for (var j = 0; j < domStyle.parts.length; j++) {\n        domStyle.parts[j](item.parts[j])\n      }\n      for (; j < item.parts.length; j++) {\n        domStyle.parts.push(addStyle(item.parts[j]))\n      }\n      if (domStyle.parts.length > item.parts.length) {\n        domStyle.parts.length = item.parts.length\n      }\n    } else {\n      var parts = []\n      for (var j = 0; j < item.parts.length; j++) {\n        parts.push(addStyle(item.parts[j]))\n      }\n      stylesInDom[item.id] = { id: item.id, refs: 1, parts: parts }\n    }\n  }\n}\n\nfunction createStyleElement () {\n  var styleElement = document.createElement('style')\n  styleElement.type = 'text/css'\n  head.appendChild(styleElement)\n  return styleElement\n}\n\nfunction addStyle (obj /* StyleObjectPart */) {\n  var update, remove\n  var styleElement = document.querySelector('style[' + ssrIdKey + '~=\"' + obj.id + '\"]')\n\n  if (styleElement) {\n    if (isProduction) {\n      // has SSR styles and in production mode.\n      // simply do nothing.\n      return noop\n    } else {\n      // has SSR styles but in dev mode.\n      // for some reason Chrome can't handle source map in server-rendered\n      // style tags - source maps in <style> only works if the style tag is\n      // created and inserted dynamically. So we remove the server rendered\n      // styles and inject new ones.\n      styleElement.parentNode.removeChild(styleElement)\n    }\n  }\n\n  if (isOldIE) {\n    // use singleton mode for IE9.\n    var styleIndex = singletonCounter++\n    styleElement = singletonElement || (singletonElement = createStyleElement())\n    update = applyToSingletonTag.bind(null, styleElement, styleIndex, false)\n    remove = applyToSingletonTag.bind(null, styleElement, styleIndex, true)\n  } else {\n    // use multi-style-tag mode in all other cases\n    styleElement = createStyleElement()\n    update = applyToTag.bind(null, styleElement)\n    remove = function () {\n      styleElement.parentNode.removeChild(styleElement)\n    }\n  }\n\n  update(obj)\n\n  return function updateStyle (newObj /* StyleObjectPart */) {\n    if (newObj) {\n      if (newObj.css === obj.css &&\n          newObj.media === obj.media &&\n          newObj.sourceMap === obj.sourceMap) {\n        return\n      }\n      update(obj = newObj)\n    } else {\n      remove()\n    }\n  }\n}\n\nvar replaceText = (function () {\n  var textStore = []\n\n  return function (index, replacement) {\n    textStore[index] = replacement\n    return textStore.filter(Boolean).join('\\n')\n  }\n})()\n\nfunction applyToSingletonTag (styleElement, index, remove, obj) {\n  var css = remove ? '' : obj.css\n\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = replaceText(index, css)\n  } else {\n    var cssNode = document.createTextNode(css)\n    var childNodes = styleElement.childNodes\n    if (childNodes[index]) styleElement.removeChild(childNodes[index])\n    if (childNodes.length) {\n      styleElement.insertBefore(cssNode, childNodes[index])\n    } else {\n      styleElement.appendChild(cssNode)\n    }\n  }\n}\n\nfunction applyToTag (styleElement, obj) {\n  var css = obj.css\n  var media = obj.media\n  var sourceMap = obj.sourceMap\n\n  if (media) {\n    styleElement.setAttribute('media', media)\n  }\n  if (options.ssrId) {\n    styleElement.setAttribute(ssrIdKey, obj.id)\n  }\n\n  if (sourceMap) {\n    // https://developer.chrome.com/devtools/docs/javascript-debugging\n    // this makes source maps inside style tags work properly in Chrome\n    css += '\\n/*# sourceURL=' + sourceMap.sources[0] + ' */'\n    // http://stackoverflow.com/a/26603875\n    css += '\\n/*# sourceMappingURL=data:application/json;base64,' + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + ' */'\n  }\n\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild)\n    }\n    styleElement.appendChild(document.createTextNode(css))\n  }\n}\n","module.exports = jQuery;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }"],"names":["$","_typeof","Craft","FeedMe","document","on","e","preventDefault","row","this","parents","data","toggle","$disableLabel","next","originalDisableLabel","text","$disableInstructions","siblings","originalDisableInstructions","hide","value","val","replace","show","t","trigger","sections","groupId","entryTypes","currentValue","newOptions","each","index","html","children","attr","elementType","elementTypes","groups","isSingleton","checked","disabled","length","prop","$options","find","$label","$filenameNode","css","opacity","visibility","$container","selectize","allowEmptyOption","nextUntil","element","rowValues","rowHasValue","i","v","undefined","prevUntil","addBack","prev","turnOn","key","toggleClass","$form","action","submit","define","Sifter","items","settings","diacritics","prototype","tokenize","query","trim","String","toLowerCase","n","regex","letter","tokens","words","split","escape_regex","DIACRITICS","hasOwnProperty","RegExp","push","string","iterator","object","callback","is_array","Array","forEach","apply","getScoreFunction","search","options","fields","token_count","prepareSearch","field_count","scoreValue","token","score","pos","scoreObject","sum","conjunction","getSortFunction","self","field","fields_count","multiplier","multipliers","get_field","implicit_score","sort","sort_empty","name","result","id","unshift","direction","splice","a","b","cmp","option_fields","extend","option_sort","option_sort_empty","total","fn_sort","fn_score","item","filter","limit","slice","asciifold","k","arguments","str","isArray","Object","toString","call","c","d","l","o","r","s","u","y","z","chunk","foreignletters","lookup","substring","charAt","regexp","foreignletter","MicroPlugin","Interface","plugins","initializePlugins","queue","names","requested","loaded","utils","require","shift","loadPlugin","plugin","Error","fn","vArg","highlight","$element","pattern","node","skip","nodeType","match","spannode","createElement","className","middlebit","splitText","middleclone","cloneNode","appendChild","parentNode","replaceChild","childNodes","test","tagName","MicroEvent","event","fct","_events","off","indexOf","mixin","destObject","props","IS_MAC","navigator","userAgent","KEY_CMD","KEY_CTRL","SUPPORTS_VALIDITY_API","window","validity","isset","hash_key","escape_html","escape_replace","hook","method","original","debounce_events","types","type","event_args","getSelection","input","start","selectionStart","selectionEnd","selection","focus","sel","createRange","selLen","moveStart","autoGrow","$input","currentWidth","update","keyCode","printable","placeholder","width","character","metaKey","altKey","force","shiftKey","fromCharCode","toUpperCase","$parent","$test","position","top","left","padding","whiteSpace","appendTo","$from","$to","properties","styles","transferStyles","remove","measureString","triggerHandler","Selectize","dir","delay","timeout","computedStyle","getComputedStyle","getPropertyValue","currentStyle","order","tabIndex","tagType","rtl","eventNS","count","highlightedValue","isOpen","isDisabled","isRequired","is","isInvalid","isLocked","isFocused","isInputHidden","isSetup","isShiftDown","isCmdDown","isCtrlDown","ignoreFocus","ignoreBlur","ignoreHover","hasOptions","currentResults","lastValue","caretPos","loading","loadedSearches","$activeOption","$activeItems","optgroups","userOptions","renderCache","onSearchChange","loadThrottle","args","clearTimeout","setTimeout","sifter","registerOption","registerOptionGroup","mode","maxItems","hideSelected","setupCallbacks","setupTemplates","setup","$wrapper","$control","$control_input","$dropdown","$dropdown_content","$dropdown_parent","inputMode","classes","classes_plugins","selector","$window","$document","addClass","wrapperClass","inputClass","dropdownParent","dropdownClass","dropdownContentClass","copyClassesToDropdown","style","join","splitOn","delimiter","delimiterEscaped","onOptionHover","onOptionSelect","onItemSelect","child","target","currentTarget","mousedown","onMouseDown","click","onClick","stopPropagation","keydown","onKeyDown","keyup","onKeyUp","keypress","onKeyPress","resize","positionDropdown","blur","onBlur","onFocus","paste","onPaste","has","revertSettings","$children","detach","tabindex","after","setValue","refreshState","updateOriginalInput","refreshItems","updatePlaceholder","disable","onChange","preload","field_label","labelField","field_optgroup","optgroupLabelField","templates","optgroup","optgroup_header","escape","option","option_create","render","callbacks","initialize","change","item_add","item_remove","clear","option_add","option_remove","option_clear","optgroup_add","optgroup_remove","optgroup_clear","dropdown_open","dropdown_close","load","defaultPrevented","isDefaultPrevented","close","open","setActiveItem","isFull","splitInput","createItem","which","create","selectAll","ctrlKey","$next","getAdjacentOption","setActiveOption","$prev","advanceSelection","selectOnTab","deleteSelection","refreshOptions","wasFocused","showInput","openOnFocus","dest","activeElement","deactivate","setTextboxValue","setCaret","body","createOnBlur","$target","hasClass","closeAfterSelect","lastQuery","addItem","getOption","loadingClass","results","Math","max","addOption","removeClass","getValue","silent","addItems","$item","eventName","idx","begin","end","swap","$last","hideInput","$option","scroll","animate","height_menu","height_item","scroll_top","scroll_bottom","height","outerHeight","scrollTop","offset","stop","scrollDuration","getSearchOptions","sortField","searchField","searchConjunction","calculateScore","triggerDropdown","j","groups_order","option_html","html_children","has_create_option","$active","$active_before","$create","active_before","maxOptions","min","optgroupField","lockOptgroupOrder","$order","canCreate","prepend","addPrecedence","valueField","optgroupValueField","addOptionGroup","removeOptionGroup","clearOptionGroups","updateOption","$item_new","value_new","index_item","cache_items","cache_options","order_old","getItem","replaceWith","removeOption","removeItem","clearOptions","getElementWithValue","eq","$els","getAttribute","values","isPending","value_next","wasFull","insertAtCaret","persist","caret","lock","called","unlock","output","invalid","refreshClasses","isEmptyObject","opts","label","removeAttr","display","outerWidth","$el","before","option_select","$option_select","$tail","onDelete","pop","tail","valueLength","advanceCaret","$adj","$child","append","enable","destroy","removeData","templateName","cache","regex_tag","clearCache","createFilter","defaults","dataAttr","settings_user","attr_data","field_value","field_optgroup_label","field_optgroup_value","tag_name","settings_element","optionsMap","readData","JSON","parse","group","arr","addGroup","$optgroup","init_select","data_raw","init_textbox","support","sortable","forcePlaceholderSize","ui","helper","overflow","active","title","headerClass","titleRowClass","labelClass","closeClass","$dropdown_header","equalizeWidth","equalizeHeight","closest","getScrollbarWidth","div","doc","innerHTML","firstChild","offsetWidth","clientWidth","removeChild","equalizeSizes","height_max","width_last","width_parent","$optgroups","innerWidth","round","render_item","html_container","html_element","parent","content","__esModule","default","module","locals","exports","add","listToStyles","parentId","list","newStyles","part","media","sourceMap","parts","hasDocument","DEBUG","stylesInDom","head","getElementsByTagName","singletonElement","singletonCounter","isProduction","noop","ssrIdKey","isOldIE","addStylesClient","_isProduction","_options","addStylesToDom","newList","mayRemove","domStyle","refs","addStyle","createStyleElement","styleElement","obj","querySelector","styleIndex","applyToSingletonTag","bind","applyToTag","newObj","textStore","replaceText","replacement","Boolean","styleSheet","cssText","cssNode","createTextNode","insertBefore","setAttribute","ssrId","sources","btoa","unescape","encodeURIComponent","stringify","jQuery","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","definition","defineProperty","enumerable","get"],"sourceRoot":""}